{"version":3,"sources":["webpack:///src/views/monitor/Online.vue","webpack:///./src/views/monitor/Online.vue?218c","webpack:///./src/views/monitor/Online.vue"],"names":["Online","name","data","advanced","dataSource","queryParams","pagination","defaultPageSize","hideOnSinglePage","indentSize","loading","computed","extends_default","columns","title","dataIndex","scopedSlots","customRender","fixed","width","Object","vuex_esm","user","state","account","mounted","this","fetch","methods","search","kickout","record","that","$confirm","content","centered","onOk","$delete","id","then","$message","success","$db","clear","location","reload","catch","r","console","error","reset","handleTableChange","filters","sorter","_this","params","arguments","length","undefined","$get","monitor_Online","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","bordered","class","layout","md","sm","label","labelCol","span","wrapperCol","offset","model","value","callback","$$v","$set","expression","_v","staticStyle","float","margin-top","type","on","click","margin-left","rowKey","scroll","x","change","_u","key","fn","text","_s","username","color","directives","rawName","$event","status","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"2IAoDAA,GACAC,KAAA,SACAC,KAFA,WAGA,OACAC,UAAA,EACAC,cACAC,eACAC,YACAC,gBAAA,IACAC,kBAAA,EACAC,WAAA,KAEAC,SAAA,IAGAC,SAAYC,KACZC,QADA,WAEA,QACAC,MAAA,MACAC,UAAA,WACAC,aAAAC,aAAA,cAEAH,MAAA,OACAC,UAAA,cAEAD,MAAA,OACAC,UAAA,OAEAD,MAAA,OACAC,UAAA,iBAEAD,MAAA,KACAC,UAAA,YACAC,aAAAC,aAAA,aACAC,MAAA,QACAC,MAAA,QAGAC,OAAAC,EAAA,EAAAD,EACAE,KAAA,SAAAC,GAAA,OAAAA,EAAAC,QAAAF,SAGAG,QA1CA,WA2CAC,KAAAC,SAEAC,SACAC,OADA,WAEAH,KAAAC,MAAAf,OACAc,KAAArB,eAGAyB,QANA,SAMAC,GACA,IAAAC,EAAAN,KACAA,KAAAO,UACAnB,MAAA,WACAoB,QAAA,yBACAC,UAAA,EACAC,KAJA,WAKAJ,EAAAK,QAAA,iBAAAN,EAAAO,IAAAC,KAAA,WACAP,EAAAQ,SAAAC,QAAA,UACAT,EAAAV,KAAAgB,KAAAP,EAAAO,IACAN,EAAAU,IAAAC,QACAC,SAAAC,UAEAb,EAAAH,WAEAiB,MAAA,SAAAC,GACAC,QAAAC,MAAAF,GACAf,EAAAQ,SAAAS,MAAA,gBAKAC,MA5BA,WA8BAxB,KAAArB,eACAqB,KAAAC,SAEAwB,kBAjCA,SAiCA7C,EAAA8C,EAAAC,GACA3B,KAAAC,MAAAf,OACAc,KAAArB,eAGAsB,MAtCA,WAsCA,IAAA2B,EAAA5B,KAAA6B,EAAAC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,MACA9B,KAAAhB,SAAA,EACAgB,KAAAiC,KAAA,eAAA/C,OACA2C,IACAhB,KAAA,SAAAQ,GACA,IAAA7C,EAAA6C,EAAA7C,UACAoD,EAAA5C,SAAA,EACA4C,EAAAlD,WAAAF,OC3Ie0D,GADEC,OAFjB,WAA0B,IAAAC,EAAApC,KAAaqC,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,UAAoBE,YAAA,YAAAC,OAA+BC,UAAA,KAAkBJ,EAAA,OAAYK,MAAAR,EAAA3D,SAAA,gBAAqC8D,EAAA,UAAeG,OAAOG,OAAA,gBAAuBN,EAAA,OAAYK,MAAAR,EAAA3D,SAAA,cAAkC8D,EAAA,SAAAA,EAAA,SAA0BG,OAAOI,GAAA,GAAAC,GAAA,MAAiBR,EAAA,eAAoBG,OAAOM,MAAA,MAAAC,UAA0BC,KAAA,GAAQC,YAAeD,KAAA,GAAAE,OAAA,MAAsBb,EAAA,WAAgBc,OAAOC,MAAAlB,EAAAzD,YAAA,SAAA4E,SAAA,SAAAC,GAA0DpB,EAAAqB,KAAArB,EAAAzD,YAAA,WAAA6E,IAA2CE,WAAA,2BAAoC,eAAAtB,EAAAuB,GAAA,KAAApB,EAAA,QAAyCqB,aAAaC,MAAA,QAAAC,aAAA,SAAoCvB,EAAA,YAAiBG,OAAOqB,KAAA,WAAiBC,IAAKC,MAAA7B,EAAAjC,UAAoBiC,EAAAuB,GAAA,QAAAvB,EAAAuB,GAAA,KAAApB,EAAA,YAA4CqB,aAAaM,cAAA,OAAoBF,IAAKC,MAAA7B,EAAAZ,SAAmBY,EAAAuB,GAAA,kBAAAvB,EAAAuB,GAAA,KAAApB,EAAA,OAAAA,EAAA,WAA+DG,OAAOvD,QAAAiD,EAAAjD,QAAAT,WAAA0D,EAAA1D,WAAAyF,OAAA,KAAAvF,WAAAwD,EAAAxD,WAAAI,QAAAoD,EAAApD,QAAAoF,QAA4HC,EAAA,MAAUL,IAAKM,OAAAlC,EAAAX,mBAA+BnC,YAAA8C,EAAAmC,KAAsBC,IAAA,WAAAC,GAAA,SAAAC,EAAArE,GAAyC,OAAAA,EAAAO,KAAAwB,EAAAxC,KAAAgB,IAAAwB,EAAAuB,GAAA,eAAAvB,EAAAuC,GAAAtE,EAAAuE,UAAA,MAAArC,EAAA,SAAqGG,OAAOmC,MAAA,UAAgBzC,EAAAuB,GAAA,eAAAvB,EAAAuB,GAAA,eAAAvB,EAAAuC,GAAAtE,EAAAuE,UAAA,mBAAyFJ,IAAA,YAAAC,GAAA,SAAAC,EAAArE,GAA0C,OAAAkC,EAAA,UAAqBuC,aAAavG,KAAA,gBAAAwG,QAAA,kBAAAzB,MAAA,qBAAAI,WAAA,yBAA8GE,aAAeiB,MAAA,WAAkBnC,OAAQqB,KAAA,WAAA3E,MAAA,MAA+B4E,IAAKC,MAAA,SAAAe,GAAyB5C,EAAAhC,QAAAC,OAAsB+B,EAAAuB,GAAA,KAAApB,EAAA,WAA4BuC,aAAavG,KAAA,kBAAAwG,QAAA,oBAAAzB,MAAA,qBAAAI,WAAA,yBAAkHhB,OAASuC,OAAA,UAAAP,KAAA,iBAAwC,MAEp1DQ,oBCCjB,IAcAC,EAdyBC,EAAQ,OAcjCC,CACE/G,EACA4D,GATF,EAVA,SAAAoD,GACEF,EAAQ,SAaV,kBAEA,MAUeG,EAAA,QAAAJ,EAAiB","file":"static/js/40.d9a724d34d9854ff22c3.js","sourcesContent":["<template>\n  <a-card :bordered=\"false\" class=\"card-area\">\n    <div :class=\"advanced ? 'search' : null\">\n      <!-- 搜索区域 -->\n      <a-form layout=\"horizontal\">\n        <div :class=\"advanced ? null: 'fold'\">\n          <a-row >\n            <a-col :md=\"12\" :sm=\"24\" >\n              <a-form-item\n                label=\"用户名\"\n                :labelCol=\"{span: 5}\"\n                :wrapperCol=\"{span: 18, offset: 1}\">\n                <a-input v-model=\"queryParams.username\"/>\n              </a-form-item>\n            </a-col>\n          </a-row>\n        </div>\n        <span style=\"float: right; margin-top: 3px;\">\n          <a-button type=\"primary\" @click=\"search\">查询</a-button>\n          <a-button style=\"margin-left: 8px\" @click=\"reset\">重置</a-button>\n        </span>\n      </a-form>\n    </div>\n    <div>\n      <!-- 表格区域 -->\n      <a-table :columns=\"columns\"\n               :dataSource=\"dataSource\"\n               rowKey=\"id\"\n               :pagination=\"pagination\"\n               :loading=\"loading\"\n               :scroll=\"{ x: 900 }\"\n               @change=\"handleTableChange\">\n        <template slot=\"username\" slot-scope=\"text, record\">\n          <template v-if=\"record.id === user.id\">\n            {{record.username}}&nbsp;&nbsp;<a-tag color=\"pink\">current</a-tag>\n          </template>\n          <template v-else>\n            {{record.username}}\n          </template>\n        </template>\n        <template slot=\"operation\" slot-scope=\"text, record\">\n          <a-icon v-hasPermission=\"'admin:user:kickout'\" type=\"poweroff\" style=\"color: #f95476\" @click=\"kickout(record)\" title=\"踢出\"></a-icon>\n          <a-badge v-hasNoPermission=\"'admin:user:kickout'\" status=\"warning\" text=\"无权限\"></a-badge>\n        </template>\n      </a-table>\n    </div>\n  </a-card>\n</template>\n\n<script>\nimport {mapState} from 'vuex'\n\nexport default {\n  name: 'Online',\n  data () {\n    return {\n      advanced: false,\n      dataSource: [],\n      queryParams: {},\n      pagination: {\n        defaultPageSize: 10000000,\n        hideOnSinglePage: true,\n        indentSize: 100\n      },\n      loading: false\n    }\n  },\n  computed: {\n    columns () {\n      return [{\n        title: '用户名',\n        dataIndex: 'username',\n        scopedSlots: { customRender: 'username' }\n      }, {\n        title: '登录时间',\n        dataIndex: 'loginTime'\n      }, {\n        title: '登录IP',\n        dataIndex: 'ip'\n      }, {\n        title: '登录地点',\n        dataIndex: 'loginAddress'\n      }, {\n        title: '操作',\n        dataIndex: 'operation',\n        scopedSlots: { customRender: 'operation' },\n        fixed: 'right',\n        width: 120\n      }]\n    },\n    ...mapState({\n      user: state => state.account.user\n    })\n  },\n  mounted () {\n    this.fetch()\n  },\n  methods: {\n    search () {\n      this.fetch({\n        ...this.queryParams\n      })\n    },\n    kickout (record) {\n      let that = this\n      this.$confirm({\n        title: '确定踢出该用户?',\n        content: '当您点击确定按钮后，该用户的登录将会马上失效',\n        centered: true,\n        onOk () {\n          that.$delete(`admin/kickout/${record.id}`).then(() => {\n            that.$message.success('踢出用户成功')\n            if (that.user.id === record.id) {\n              that.$db.clear()\n              location.reload()\n            } else {\n              that.search()\n            }\n          }).catch((r) => {\n            console.error(r)\n            that.$message.error('踢出用户失败')\n          })\n        }\n      })\n    },\n    reset () {\n      // 重置查询参数\n      this.queryParams = {}\n      this.fetch()\n    },\n    handleTableChange (pagination, filters, sorter) {\n      this.fetch({\n        ...this.queryParams\n      })\n    },\n    fetch (params = {}) {\n      this.loading = true\n      this.$get('admin/online', {\n        ...params\n      }).then((r) => {\n        let data = r.data.data\n        this.loading = false\n        this.dataSource = data\n      })\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n  @import \"../../../static/less/Common\";\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/monitor/Online.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('a-card',{staticClass:\"card-area\",attrs:{\"bordered\":false}},[_c('div',{class:_vm.advanced ? 'search' : null},[_c('a-form',{attrs:{\"layout\":\"horizontal\"}},[_c('div',{class:_vm.advanced ? null: 'fold'},[_c('a-row',[_c('a-col',{attrs:{\"md\":12,\"sm\":24}},[_c('a-form-item',{attrs:{\"label\":\"用户名\",\"labelCol\":{span: 5},\"wrapperCol\":{span: 18, offset: 1}}},[_c('a-input',{model:{value:(_vm.queryParams.username),callback:function ($$v) {_vm.$set(_vm.queryParams, \"username\", $$v)},expression:\"queryParams.username\"}})],1)],1)],1)],1),_vm._v(\" \"),_c('span',{staticStyle:{\"float\":\"right\",\"margin-top\":\"3px\"}},[_c('a-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.search}},[_vm._v(\"查询\")]),_vm._v(\" \"),_c('a-button',{staticStyle:{\"margin-left\":\"8px\"},on:{\"click\":_vm.reset}},[_vm._v(\"重置\")])],1)])],1),_vm._v(\" \"),_c('div',[_c('a-table',{attrs:{\"columns\":_vm.columns,\"dataSource\":_vm.dataSource,\"rowKey\":\"id\",\"pagination\":_vm.pagination,\"loading\":_vm.loading,\"scroll\":{ x: 900 }},on:{\"change\":_vm.handleTableChange},scopedSlots:_vm._u([{key:\"username\",fn:function(text, record){return [(record.id === _vm.user.id)?[_vm._v(\"\\n          \"+_vm._s(record.username)+\"  \"),_c('a-tag',{attrs:{\"color\":\"pink\"}},[_vm._v(\"current\")])]:[_vm._v(\"\\n          \"+_vm._s(record.username)+\"\\n        \")]]}},{key:\"operation\",fn:function(text, record){return [_c('a-icon',{directives:[{name:\"hasPermission\",rawName:\"v-hasPermission\",value:('admin:user:kickout'),expression:\"'admin:user:kickout'\"}],staticStyle:{\"color\":\"#f95476\"},attrs:{\"type\":\"poweroff\",\"title\":\"踢出\"},on:{\"click\":function($event){_vm.kickout(record)}}}),_vm._v(\" \"),_c('a-badge',{directives:[{name:\"hasNoPermission\",rawName:\"v-hasNoPermission\",value:('admin:user:kickout'),expression:\"'admin:user:kickout'\"}],attrs:{\"status\":\"warning\",\"text\":\"无权限\"}})]}}])})],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-0568e03e\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/views/monitor/Online.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-0568e03e\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./Online.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./Online.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./Online.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-0568e03e\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./Online.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-0568e03e\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/monitor/Online.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}