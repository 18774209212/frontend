{"version":3,"sources":["webpack:///src/views/trace/batch/BatchEdit.vue","webpack:///./src/views/trace/batch/BatchEdit.vue?14ab","webpack:///./src/views/trace/batch/BatchEdit.vue","webpack:///src/views/trace/report/ReportAdd.vue","webpack:///./src/views/trace/report/ReportAdd.vue?bb0a","webpack:///./src/views/trace/report/ReportAdd.vue","webpack:///src/views/trace/record/RecordAdd.vue","webpack:///./src/views/trace/record/RecordAdd.vue?bc52","webpack:///./src/views/trace/record/RecordAdd.vue","webpack:///src/views/trace/batch/Batch.vue","webpack:///./src/views/trace/batch/Batch.vue?eb63","webpack:///./src/views/trace/batch/Batch.vue","webpack:///src/views/trace/apply/ApplyAdd.vue","webpack:///./src/views/trace/apply/ApplyAdd.vue?53fd","webpack:///./src/views/trace/apply/ApplyAdd.vue"],"names":["formItemLayout","labelCol","span","wrapperCol","BatchEdit","name","props","batchEditVisiable","default","data","loading","form","this","$form","createForm","batch","produceDate","methods","moment","moment_default","a","onDateChange","value","str","reset","resetFields","onClose","$emit","setFormValues","_ref","_this","objectWithoutProperties_default","fields","keys_default","forEach","key","indexOf","getFieldDecorator","obj","setFieldsValue","handleSubmit","_this2","validateFields","err","values","getFieldsValue","$put","extends_default","then","catch","batch_BatchEdit","render","_vm","_h","$createElement","_c","_self","staticStyle","height","overflow","padding-bottom","attrs","title","maskClosable","width","placement","closable","visible","on","close","_b","label","directives","rawName","expression","readOnly","_v","rules","required","message","max","rows","format","change","staticClass","okText","cancelText","confirm","margin-right","type","click","staticRenderFns","Component","__webpack_require__","normalizeComponent","__webpack_exports__","ReportAdd","components","UploadImage","reportAddVisiable","batchId","fileList","handleFileSelect","file","push","handleFileRemove","index","splice","$refs","uploadImageChild","finished","formData","FormData","append","img","Date","parse","$upload","report_ReportAdd","initialValue","ref","limitNum","fileSelect","fileRemove","RecordAdd","recordAddVisiable","operationTime","timeId","onTimeChange","dataString","record_RecordAdd","showTime","placeholder","Batch","RangeDate","Info","ApplyAdd","current_user","$store","state","account","user","advanced","dataSource","selectedRowKeys","queryParams","sortedInfo","applyAddVisiable","blockchainVisible","confirmLoading","paginationInfo","info","visiable","top","productName","producer","informTitle","informContent","createTime","hash","pagination","pageSizeOptions","defaultCurrent","defaultPageSize","showQuickJumper","showSizeChanger","showTotal","total","range","computed","columns","dataIndex","sorter","sortOrder","columnKey","order","scopedSlots","customRender","fixed","rowSelection","that","onChange","selectedRows","getCheckboxProps","record","disabled","creator","username","mounted","fetch","showBlockchain","blockchainOk","$post","$message","success","search","view","handleInfoClose","addApply","id","handleApplyAddClose","handleApplyAddSuccess","addRecord","handleRecordAddClose","handleRecordAddSuccess","addReport","handleReportAddClose","handleReportAddSuccess","handleBatchEditClose","handleBatchEditSuccess","edit","batchEdit","handleDateChange","createTimeFrom","createTimeTo","batchDelete","length","$confirm","content","centered","onOk","$delete","join","onCancel","warning","sortField","field","handleTableChange","filters","filteredInfo","params","arguments","undefined","TableInfo","current","pageSize","pageNum","$get","r","batch_Batch","bordered","class","layout","md","sm","offset","model","callback","$$v","$set","float","margin-top","margin-left","ghost","rowKey","scroll","x","_u","fn","text","theme","twoToneColor","$event","_e","slot","status","infoVisiable","ok","_s","ssrContext","apply","num","error","watch","apply_ApplyAdd"],"mappings":"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","file":"static/js/3.cfb6084c77913c16e01f.js","sourcesContent":["<template>\r\n  <a-drawer title=\"修改批次\"\r\n            :maskClosable=\"false\"\r\n            width=650\r\n            placement=\"right\"\r\n            :closable=\"false\"\r\n            @close=\"onClose\"\r\n            :visible=\"batchEditVisiable\"\r\n            style=\"height: calc(100% - 55px);overflow: auto;padding-bottom: 53px;\">\r\n    <a-form :form=\"form\">\r\n      <a-form-item label='产品ID'\r\n                   v-bind=\"formItemLayout\">\r\n        <a-input readOnly\r\n                 v-decorator=\"['productId']\" />\r\n      </a-form-item>\r\n      <a-form-item label='批次Id'\r\n                   v-bind=\"formItemLayout\">\r\n        <a-input readOnly\r\n                 style=\"width: 100%\"\r\n                 v-decorator=\"['batchId']\" />\r\n      </a-form-item>\r\n      <a-form-item label='批次名称'\r\n                   v-bind=\"formItemLayout\">\r\n        <a-input v-decorator=\"['batchName',\r\n                   {rules: [\r\n                    { required: true, message: '不能为空'}\r\n                  ]}]\" />\r\n      </a-form-item>\r\n      <a-form-item label='通知标题'\r\n                   v-bind=\"formItemLayout\">\r\n        <a-input v-decorator=\"['informTitle',\r\n                   {rules: [\r\n                    {  max: 50, message: '长度不能超过50个字符'}\r\n                  ]}]\" />\r\n      </a-form-item>\r\n      <a-form-item label='通知内容'\r\n                   v-bind=\"formItemLayout\">\r\n        <a-textarea :rows=\"4\"\r\n                    v-decorator=\"[\r\n          'informContent',\r\n          {rules: [\r\n            { max: 255, message: '长度不能超过255个字符'}\r\n          ]}]\">\r\n        </a-textarea>\r\n      </a-form-item>\r\n      <a-form-item label='生产者'\r\n                   v-bind=\"formItemLayout\">\r\n        <a-input v-decorator=\"['producer']\" />\r\n      </a-form-item>\r\n      <a-form-item label='生产日期'\r\n                   format=\"YYYY-MM-DD\"\r\n                   v-bind=\"formItemLayout\">\r\n        <a-date-picker :value=\"produceDate\"\r\n                       @change=\"onDateChange\" />\r\n      </a-form-item>\r\n    </a-form>\r\n    <div class=\"drawer-bootom-button\">\r\n      <a-popconfirm title=\"确定放弃编辑？\"\r\n                    @confirm=\"onClose\"\r\n                    okText=\"确定\"\r\n                    cancelText=\"取消\">\r\n        <a-button style=\"margin-right: .8rem\">取消</a-button>\r\n      </a-popconfirm>\r\n      <a-button @click=\"handleSubmit\"\r\n                type=\"primary\"\r\n                :loading=\"loading\">提交</a-button>\r\n    </div>\r\n  </a-drawer>\r\n</template>\r\n<script>\r\nimport moment from 'moment'\r\nconst formItemLayout = {\r\n  labelCol: { span: 3 },\r\n  wrapperCol: { span: 18 }\r\n}\r\nexport default {\r\n  name: 'BatchEdit',\r\n  props: {\r\n    batchEditVisiable: {\r\n      default: false\r\n    }\r\n  },\r\n  data () {\r\n    return {\r\n      loading: false,\r\n      formItemLayout,\r\n      form: this.$form.createForm(this),\r\n      batch: {},\r\n      produceDate: null\r\n    }\r\n  },\r\n  methods: {\r\n    moment,\r\n    onDateChange (value, str) {\r\n      this.batch.produceDate = str\r\n    },\r\n    reset () {\r\n      this.loading = false\r\n      this.form.resetFields()\r\n    },\r\n    onClose () {\r\n      this.reset()\r\n      this.$emit('close')\r\n    },\r\n    setFormValues ({ ...batch }) {\r\n      let fields = ['batchId', 'batchName', 'productId', 'producer', 'informTitle', 'informContent']\r\n      Object.keys(batch).forEach((key) => {\r\n        if (fields.indexOf(key) !== -1) {\r\n          this.form.getFieldDecorator(key)\r\n          let obj = {}\r\n          obj[key] = batch[key]\r\n          this.form.setFieldsValue(obj)\r\n        }\r\n      })\r\n      if (batch.produceDate) {\r\n        this.produceDate = moment(batch.produceDate, 'YYYY-MM-DD')\r\n      }\r\n    },\r\n    handleSubmit () {\r\n      this.form.validateFields((err, values) => {\r\n        if (!err) {\r\n          this.loading = true\r\n          let batch = this.form.getFieldsValue()\r\n          batch.produceDate = this.batch.produceDate\r\n          this.$put('batch', {\r\n            ...batch\r\n          }).then(() => {\r\n            this.reset()\r\n            this.$emit('success')\r\n          }).catch(() => {\r\n            this.loading = false\r\n          })\r\n        }\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/trace/batch/BatchEdit.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('a-drawer',{staticStyle:{\"height\":\"calc(100% - 55px)\",\"overflow\":\"auto\",\"padding-bottom\":\"53px\"},attrs:{\"title\":\"修改批次\",\"maskClosable\":false,\"width\":\"650\",\"placement\":\"right\",\"closable\":false,\"visible\":_vm.batchEditVisiable},on:{\"close\":_vm.onClose}},[_c('a-form',{attrs:{\"form\":_vm.form}},[_c('a-form-item',_vm._b({attrs:{\"label\":\"产品ID\"}},'a-form-item',_vm.formItemLayout,false),[_c('a-input',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:(['productId']),expression:\"['productId']\"}],attrs:{\"readOnly\":\"\"}})],1),_vm._v(\" \"),_c('a-form-item',_vm._b({attrs:{\"label\":\"批次Id\"}},'a-form-item',_vm.formItemLayout,false),[_c('a-input',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:(['batchId']),expression:\"['batchId']\"}],staticStyle:{\"width\":\"100%\"},attrs:{\"readOnly\":\"\"}})],1),_vm._v(\" \"),_c('a-form-item',_vm._b({attrs:{\"label\":\"批次名称\"}},'a-form-item',_vm.formItemLayout,false),[_c('a-input',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:(['batchName',\n                 {rules: [\n                  { required: true, message: '不能为空'}\n                ]}]),expression:\"['batchName',\\n                 {rules: [\\n                  { required: true, message: '不能为空'}\\n                ]}]\"}]})],1),_vm._v(\" \"),_c('a-form-item',_vm._b({attrs:{\"label\":\"通知标题\"}},'a-form-item',_vm.formItemLayout,false),[_c('a-input',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:(['informTitle',\n                 {rules: [\n                  {  max: 50, message: '长度不能超过50个字符'}\n                ]}]),expression:\"['informTitle',\\n                 {rules: [\\n                  {  max: 50, message: '长度不能超过50个字符'}\\n                ]}]\"}]})],1),_vm._v(\" \"),_c('a-form-item',_vm._b({attrs:{\"label\":\"通知内容\"}},'a-form-item',_vm.formItemLayout,false),[_c('a-textarea',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:([\n        'informContent',\n        {rules: [\n          { max: 255, message: '长度不能超过255个字符'}\n        ]}]),expression:\"[\\n        'informContent',\\n        {rules: [\\n          { max: 255, message: '长度不能超过255个字符'}\\n        ]}]\"}],attrs:{\"rows\":4}})],1),_vm._v(\" \"),_c('a-form-item',_vm._b({attrs:{\"label\":\"生产者\"}},'a-form-item',_vm.formItemLayout,false),[_c('a-input',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:(['producer']),expression:\"['producer']\"}]})],1),_vm._v(\" \"),_c('a-form-item',_vm._b({attrs:{\"label\":\"生产日期\",\"format\":\"YYYY-MM-DD\"}},'a-form-item',_vm.formItemLayout,false),[_c('a-date-picker',{attrs:{\"value\":_vm.produceDate},on:{\"change\":_vm.onDateChange}})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"drawer-bootom-button\"},[_c('a-popconfirm',{attrs:{\"title\":\"确定放弃编辑？\",\"okText\":\"确定\",\"cancelText\":\"取消\"},on:{\"confirm\":_vm.onClose}},[_c('a-button',{staticStyle:{\"margin-right\":\".8rem\"}},[_vm._v(\"取消\")])],1),_vm._v(\" \"),_c('a-button',{attrs:{\"type\":\"primary\",\"loading\":_vm.loading},on:{\"click\":_vm.handleSubmit}},[_vm._v(\"提交\")])],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-1dbf0106\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/views/trace/batch/BatchEdit.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./BatchEdit.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./BatchEdit.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-1dbf0106\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./BatchEdit.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/trace/batch/BatchEdit.vue\n// module id = null\n// module chunks = ","<template>\r\n  <a-drawer title=\"新增检验报告\"\r\n            :maskClosable=\"false\"\r\n            width=650\r\n            placement=\"right\"\r\n            :closable=\"false\"\r\n            @close=\"onClose\"\r\n            :visible=\"reportAddVisiable\"\r\n            style=\"height: calc(100% - 55px);overflow: auto;padding-bottom: 53px;\">\r\n    <a-form :form=\"form\">\r\n      <a-form-item label='批次ID'\r\n                   v-bind=\"formItemLayout\">\r\n        <a-input readOnly\r\n                 v-decorator=\"['batchId',\r\n                   {initialValue: batchId,\r\n                     rules: [\r\n                    { required: true, message: '不能为空'}\r\n                  ]}]\" />\r\n      </a-form-item>\r\n      <a-form-item label='检验名称'\r\n                   v-bind=\"formItemLayout\">\r\n        <a-input v-decorator=\"['reportName',\r\n                   {rules: [\r\n                    { required: true, message: '不能为空'}\r\n                  ]}]\" />\r\n      </a-form-item>\r\n      <a-form-item label='检验人'\r\n                   v-bind=\"formItemLayout\">\r\n        <a-input v-decorator=\"['surveyor',\r\n              {rules: [{ max: 30, message: '长度不能超过30个字符'}\r\n              ]}]\" />\r\n      </a-form-item>\r\n      <a-form-item label='检验结果'\r\n                   v-bind=\"formItemLayout\">\r\n        <a-input v-decorator=\"['result',\r\n              {rules: [{ max: 100, message: '长度不能超过100个字符'}\r\n              ]}]\" />\r\n      </a-form-item>\r\n      <a-form-item label='图片'\r\n                   v-bind=\"formItemLayout\">\r\n        <upload-image ref=\"uploadImageChild\"\r\n                      limitNum=3\r\n                      @fileSelect=\"handleFileSelect\"\r\n                      @fileRemove=\"handleFileRemove\"></upload-image>\r\n      </a-form-item>\r\n    </a-form>\r\n    <div class=\"drawer-bootom-button\">\r\n      <a-popconfirm title=\"确定放弃编辑？\"\r\n                    @confirm=\"onClose\"\r\n                    okText=\"确定\"\r\n                    cancelText=\"取消\">\r\n        <a-button style=\"margin-right: .8rem\">取消</a-button>\r\n      </a-popconfirm>\r\n      <a-button @click=\"handleSubmit\"\r\n                type=\"primary\"\r\n                :loading=\"loading\">提交</a-button>\r\n    </div>\r\n  </a-drawer>\r\n</template>\r\n<script>\r\nimport UploadImage from '@/components/upload/UploadImage'\r\nconst formItemLayout = {\r\n  labelCol: { span: 3 },\r\n  wrapperCol: { span: 18 }\r\n}\r\nexport default {\r\n  name: 'ReportAdd',\r\n  components: { UploadImage },\r\n  props: {\r\n    reportAddVisiable: {\r\n      default: false\r\n    },\r\n    batchId: {}\r\n  },\r\n  data () {\r\n    return {\r\n      loading: false,\r\n      formItemLayout,\r\n      form: this.$form.createForm(this),\r\n      fileList: []\r\n    }\r\n  },\r\n  methods: {\r\n    handleFileSelect (file) {\r\n      this.fileList.push(file)\r\n    },\r\n    handleFileRemove (index) {\r\n      this.fileList.splice(index, 1)\r\n    },\r\n    reset () {\r\n      this.loading = false\r\n      this.form.resetFields()\r\n      this.fileList = []\r\n      this.$refs.uploadImageChild.finished()\r\n    },\r\n    onClose () {\r\n      this.reset()\r\n      this.$emit('close')\r\n    },\r\n    handleSubmit () {\r\n      this.form.validateFields((err, values) => {\r\n        if (!err) {\r\n          this.loading = true\r\n          const formData = new FormData()\r\n          Object.keys(values).forEach((key) => {\r\n            if (values[key]) {\r\n              formData.append(key, values[key])\r\n            }\r\n          })\r\n          this.fileList.forEach((img, index) => {\r\n            formData.append('files', img, 'file_' + Date.parse(new Date()) + '.jpg')\r\n          })\r\n          this.$upload('report', formData).then(() => {\r\n            this.reset()\r\n            this.$emit('success')\r\n          }).catch(() => {\r\n            this.loading = false\r\n          })\r\n        }\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/trace/report/ReportAdd.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('a-drawer',{staticStyle:{\"height\":\"calc(100% - 55px)\",\"overflow\":\"auto\",\"padding-bottom\":\"53px\"},attrs:{\"title\":\"新增检验报告\",\"maskClosable\":false,\"width\":\"650\",\"placement\":\"right\",\"closable\":false,\"visible\":_vm.reportAddVisiable},on:{\"close\":_vm.onClose}},[_c('a-form',{attrs:{\"form\":_vm.form}},[_c('a-form-item',_vm._b({attrs:{\"label\":\"批次ID\"}},'a-form-item',_vm.formItemLayout,false),[_c('a-input',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:(['batchId',\n                 {initialValue: _vm.batchId,\n                   rules: [\n                  { required: true, message: '不能为空'}\n                ]}]),expression:\"['batchId',\\n                 {initialValue: batchId,\\n                   rules: [\\n                  { required: true, message: '不能为空'}\\n                ]}]\"}],attrs:{\"readOnly\":\"\"}})],1),_vm._v(\" \"),_c('a-form-item',_vm._b({attrs:{\"label\":\"检验名称\"}},'a-form-item',_vm.formItemLayout,false),[_c('a-input',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:(['reportName',\n                 {rules: [\n                  { required: true, message: '不能为空'}\n                ]}]),expression:\"['reportName',\\n                 {rules: [\\n                  { required: true, message: '不能为空'}\\n                ]}]\"}]})],1),_vm._v(\" \"),_c('a-form-item',_vm._b({attrs:{\"label\":\"检验人\"}},'a-form-item',_vm.formItemLayout,false),[_c('a-input',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:(['surveyor',\n            {rules: [{ max: 30, message: '长度不能超过30个字符'}\n            ]}]),expression:\"['surveyor',\\n            {rules: [{ max: 30, message: '长度不能超过30个字符'}\\n            ]}]\"}]})],1),_vm._v(\" \"),_c('a-form-item',_vm._b({attrs:{\"label\":\"检验结果\"}},'a-form-item',_vm.formItemLayout,false),[_c('a-input',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:(['result',\n            {rules: [{ max: 100, message: '长度不能超过100个字符'}\n            ]}]),expression:\"['result',\\n            {rules: [{ max: 100, message: '长度不能超过100个字符'}\\n            ]}]\"}]})],1),_vm._v(\" \"),_c('a-form-item',_vm._b({attrs:{\"label\":\"图片\"}},'a-form-item',_vm.formItemLayout,false),[_c('upload-image',{ref:\"uploadImageChild\",attrs:{\"limitNum\":\"3\"},on:{\"fileSelect\":_vm.handleFileSelect,\"fileRemove\":_vm.handleFileRemove}})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"drawer-bootom-button\"},[_c('a-popconfirm',{attrs:{\"title\":\"确定放弃编辑？\",\"okText\":\"确定\",\"cancelText\":\"取消\"},on:{\"confirm\":_vm.onClose}},[_c('a-button',{staticStyle:{\"margin-right\":\".8rem\"}},[_vm._v(\"取消\")])],1),_vm._v(\" \"),_c('a-button',{attrs:{\"type\":\"primary\",\"loading\":_vm.loading},on:{\"click\":_vm.handleSubmit}},[_vm._v(\"提交\")])],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-5cb9bf59\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/views/trace/report/ReportAdd.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./ReportAdd.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./ReportAdd.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-5cb9bf59\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./ReportAdd.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/trace/report/ReportAdd.vue\n// module id = null\n// module chunks = ","<template>\r\n  <a-drawer title=\"新增生产档案\"\r\n            :maskClosable=\"false\"\r\n            width=650\r\n            placement=\"right\"\r\n            :closable=\"false\"\r\n            @close=\"onClose\"\r\n            :visible=\"recordAddVisiable\"\r\n            style=\"height: calc(100% - 55px);overflow: auto;padding-bottom: 53px;\">\r\n    <a-form :form=\"form\">\r\n      <a-form-item label='批次号'\r\n                   v-bind=\"formItemLayout\">\r\n        <a-input readOnly\r\n                 v-decorator=\"['batchId',\r\n                   {initialValue: batchId,\r\n                     rules: [\r\n                    { required: true, message: '不能为空'}\r\n                  ]}]\" />\r\n      </a-form-item>\r\n      <a-form-item label='操作'\r\n                   v-bind=\"formItemLayout\">\r\n        <a-input v-decorator=\"['operation',\r\n                   {rules: [\r\n                    { required: true, message: '不能为空'},\r\n                    { max: 50, message: '长度不能超过50个字符'}\r\n                  ]}]\" />\r\n      </a-form-item>\r\n      <a-form-item label='操作时间'\r\n                   v-bind=\"formItemLayout\">\r\n        <a-date-picker showTime\r\n                       :key=\"timeId\"\r\n                       format=\"YYYY-MM-DD HH:mm:ss\"\r\n                       placeholder=\"Select Time\"\r\n                       @change=\"onTimeChange\" />\r\n      </a-form-item>\r\n      <a-form-item label='工具'\r\n                   v-bind=\"formItemLayout\">\r\n        <a-input v-decorator=\"['tool',\r\n              {rules: [\r\n                { max: 50, message: '长度不能超过50个字符'}\r\n              ]}]\" />\r\n      </a-form-item>\r\n      <a-form-item label='操作员'\r\n                   v-bind=\"formItemLayout\">\r\n        <a-input v-decorator=\"['operator',\r\n              {rules: [\r\n                { max: 50, message: '长度不能超过50个字符'}\r\n              ]}]\" />\r\n      </a-form-item>\r\n      <a-form-item label='用品'\r\n                   v-bind=\"formItemLayout\">\r\n        <a-input v-decorator=\"['item',\r\n              {rules: [\r\n                { max: 100, message: '长度不能超过100个字符'}\r\n              ]}]\" />\r\n      </a-form-item>\r\n      <a-form-item label='用量'\r\n                   v-bind=\"formItemLayout\">\r\n        <a-input v-decorator=\"['dosage',\r\n              {rules: [\r\n                { max: 100, message: '长度不能超过100个字符'}\r\n              ]}]\" />\r\n      </a-form-item>\r\n      <a-form-item label='图片'\r\n                   v-bind=\"formItemLayout\">\r\n        <upload-image ref=\"uploadImageChild\"\r\n                      limitNum=3\r\n                      @fileSelect=\"handleFileSelect\"\r\n                      @fileRemove=\"handleFileRemove\"></upload-image>\r\n      </a-form-item>\r\n    </a-form>\r\n    <div class=\"drawer-bootom-button\">\r\n      <a-popconfirm title=\"确定放弃编辑？\"\r\n                    @confirm=\"onClose\"\r\n                    okText=\"确定\"\r\n                    cancelText=\"取消\">\r\n        <a-button style=\"margin-right: .8rem\">取消</a-button>\r\n      </a-popconfirm>\r\n      <a-button @click=\"handleSubmit\"\r\n                type=\"primary\"\r\n                :loading=\"loading\">提交</a-button>\r\n    </div>\r\n  </a-drawer>\r\n</template>\r\n<script>\r\nimport UploadImage from '@/components/upload/UploadImage'\r\nconst formItemLayout = {\r\n  labelCol: { span: 4 },\r\n  wrapperCol: { span: 18 }\r\n}\r\nexport default {\r\n  name: 'RecordAdd',\r\n  components: { UploadImage },\r\n  props: {\r\n    recordAddVisiable: {\r\n      default: false\r\n    },\r\n    batchId: {}\r\n  },\r\n  data () {\r\n    return {\r\n      loading: false,\r\n      formItemLayout,\r\n      form: this.$form.createForm(this),\r\n      fileList: [],\r\n      operationTime: null,\r\n      timeId: +new Date()\r\n    }\r\n  },\r\n  methods: {\r\n    onTimeChange (value, dataString) {\r\n      this.operationTime = value\r\n    },\r\n    handleFileSelect (file) {\r\n      this.fileList.push(file)\r\n    },\r\n    handleFileRemove (index) {\r\n      this.fileList.splice(index, 1)\r\n    },\r\n    reset () {\r\n      this.loading = false\r\n      this.form.resetFields()\r\n      this.fileList = []\r\n      this.$refs.uploadImageChild.finished()\r\n      this.timeId = +new Date()\r\n    },\r\n    onClose () {\r\n      this.reset()\r\n      this.$emit('close')\r\n    },\r\n    handleSubmit () {\r\n      this.form.validateFields((err, values) => {\r\n        if (!err) {\r\n          values.operationTime = this.operationTime\r\n          const formData = new FormData()\r\n          Object.keys(values).forEach((key) => {\r\n            if (values[key]) {\r\n              formData.append(key, values[key])\r\n            }\r\n          })\r\n          this.loading = true\r\n          this.fileList.forEach((img, index) => {\r\n            formData.append('files', img, 'file_' + Date.parse(new Date()) + '.jpg')\r\n          })\r\n          this.$upload('record', formData).then(() => {\r\n            this.reset()\r\n            this.$emit('success')\r\n          }).catch(() => {\r\n            this.loading = false\r\n          })\r\n        }\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/trace/record/RecordAdd.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('a-drawer',{staticStyle:{\"height\":\"calc(100% - 55px)\",\"overflow\":\"auto\",\"padding-bottom\":\"53px\"},attrs:{\"title\":\"新增生产档案\",\"maskClosable\":false,\"width\":\"650\",\"placement\":\"right\",\"closable\":false,\"visible\":_vm.recordAddVisiable},on:{\"close\":_vm.onClose}},[_c('a-form',{attrs:{\"form\":_vm.form}},[_c('a-form-item',_vm._b({attrs:{\"label\":\"批次号\"}},'a-form-item',_vm.formItemLayout,false),[_c('a-input',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:(['batchId',\n                 {initialValue: _vm.batchId,\n                   rules: [\n                  { required: true, message: '不能为空'}\n                ]}]),expression:\"['batchId',\\n                 {initialValue: batchId,\\n                   rules: [\\n                  { required: true, message: '不能为空'}\\n                ]}]\"}],attrs:{\"readOnly\":\"\"}})],1),_vm._v(\" \"),_c('a-form-item',_vm._b({attrs:{\"label\":\"操作\"}},'a-form-item',_vm.formItemLayout,false),[_c('a-input',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:(['operation',\n                 {rules: [\n                  { required: true, message: '不能为空'},\n                  { max: 50, message: '长度不能超过50个字符'}\n                ]}]),expression:\"['operation',\\n                 {rules: [\\n                  { required: true, message: '不能为空'},\\n                  { max: 50, message: '长度不能超过50个字符'}\\n                ]}]\"}]})],1),_vm._v(\" \"),_c('a-form-item',_vm._b({attrs:{\"label\":\"操作时间\"}},'a-form-item',_vm.formItemLayout,false),[_c('a-date-picker',{key:_vm.timeId,attrs:{\"showTime\":\"\",\"format\":\"YYYY-MM-DD HH:mm:ss\",\"placeholder\":\"Select Time\"},on:{\"change\":_vm.onTimeChange}})],1),_vm._v(\" \"),_c('a-form-item',_vm._b({attrs:{\"label\":\"工具\"}},'a-form-item',_vm.formItemLayout,false),[_c('a-input',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:(['tool',\n            {rules: [\n              { max: 50, message: '长度不能超过50个字符'}\n            ]}]),expression:\"['tool',\\n            {rules: [\\n              { max: 50, message: '长度不能超过50个字符'}\\n            ]}]\"}]})],1),_vm._v(\" \"),_c('a-form-item',_vm._b({attrs:{\"label\":\"操作员\"}},'a-form-item',_vm.formItemLayout,false),[_c('a-input',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:(['operator',\n            {rules: [\n              { max: 50, message: '长度不能超过50个字符'}\n            ]}]),expression:\"['operator',\\n            {rules: [\\n              { max: 50, message: '长度不能超过50个字符'}\\n            ]}]\"}]})],1),_vm._v(\" \"),_c('a-form-item',_vm._b({attrs:{\"label\":\"用品\"}},'a-form-item',_vm.formItemLayout,false),[_c('a-input',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:(['item',\n            {rules: [\n              { max: 100, message: '长度不能超过100个字符'}\n            ]}]),expression:\"['item',\\n            {rules: [\\n              { max: 100, message: '长度不能超过100个字符'}\\n            ]}]\"}]})],1),_vm._v(\" \"),_c('a-form-item',_vm._b({attrs:{\"label\":\"用量\"}},'a-form-item',_vm.formItemLayout,false),[_c('a-input',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:(['dosage',\n            {rules: [\n              { max: 100, message: '长度不能超过100个字符'}\n            ]}]),expression:\"['dosage',\\n            {rules: [\\n              { max: 100, message: '长度不能超过100个字符'}\\n            ]}]\"}]})],1),_vm._v(\" \"),_c('a-form-item',_vm._b({attrs:{\"label\":\"图片\"}},'a-form-item',_vm.formItemLayout,false),[_c('upload-image',{ref:\"uploadImageChild\",attrs:{\"limitNum\":\"3\"},on:{\"fileSelect\":_vm.handleFileSelect,\"fileRemove\":_vm.handleFileRemove}})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"drawer-bootom-button\"},[_c('a-popconfirm',{attrs:{\"title\":\"确定放弃编辑？\",\"okText\":\"确定\",\"cancelText\":\"取消\"},on:{\"confirm\":_vm.onClose}},[_c('a-button',{staticStyle:{\"margin-right\":\".8rem\"}},[_vm._v(\"取消\")])],1),_vm._v(\" \"),_c('a-button',{attrs:{\"type\":\"primary\",\"loading\":_vm.loading},on:{\"click\":_vm.handleSubmit}},[_vm._v(\"提交\")])],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-02aac320\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/views/trace/record/RecordAdd.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./RecordAdd.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./RecordAdd.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-02aac320\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./RecordAdd.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/trace/record/RecordAdd.vue\n// module id = null\n// module chunks = ","/* eslint-disable space-before-function-paren */\r\n<template>\r\n  <a-card :bordered=\"false\"\r\n          class=\"card-area\">\r\n    <div :class=\"advanced ? 'search' : null\">\r\n      <!-- 搜索区域 -->\r\n      <a-form layout=\"horizontal\">\r\n        <div :class=\"advanced ? null: 'fold'\">\r\n          <a-row>\r\n            <a-col :md=\"12\"\r\n                   :sm=\"24\">\r\n              <a-form-item label=\"批次名\"\r\n                           :labelCol=\"{span: 5}\"\r\n                           :wrapperCol=\"{span: 18, offset: 1}\">\r\n                <a-input v-model=\"queryParams.batchName\" />\r\n              </a-form-item>\r\n            </a-col>\r\n            <a-col :md=\"12\"\r\n                   :sm=\"24\">\r\n              <a-form-item label=\"创建时间\"\r\n                           :labelCol=\"{span: 5}\"\r\n                           :wrapperCol=\"{span: 18, offset: 1}\">\r\n                <range-date @change=\"handleDateChange\"\r\n                            ref=\"createTime\"></range-date>\r\n              </a-form-item>\r\n            </a-col>\r\n          </a-row>\r\n        </div>\r\n        <span style=\"float: right; margin-top: 3px;\">\r\n          <a-button type=\"primary\"\r\n                    @click=\"search\">查询</a-button>\r\n          <a-button style=\"margin-left: 8px\"\r\n                    @click=\"reset\">重置</a-button>\r\n        </span>\r\n      </a-form>\r\n    </div>\r\n    <div>\r\n      <div class=\"operator\">\r\n        <a-button v-hasPermission=\"'batch:delete'\"\r\n                  type=\"primary\"\r\n                  ghost\r\n                  @click=\"batchDelete\">删除</a-button>\r\n      </div>\r\n      <!-- 表格区域 -->\r\n      <a-table ref=\"TableInfo\"\r\n               :columns=\"columns\"\r\n               :dataSource=\"dataSource\"\r\n               rowKey=\"batchId\"\r\n               :pagination=\"pagination\"\r\n               :loading=\"loading\"\r\n               :scroll=\"{ x: 900 }\"\r\n               :rowSelection=\"rowSelection\"\r\n               @change=\"handleTableChange\">\r\n        <template slot=\"operation\"\r\n                  slot-scope=\"text, record\">\r\n          <div v-if=\"current_user.username === record.creator\">\r\n            <a-icon type=\"eye\"\r\n                    theme=\"twoTone\"\r\n                    twoToneColor=\"#42b983\"\r\n                    @click=\"view(record)\"\r\n                    title=\"查看\"></a-icon>\r\n            <a-icon v-hasPermission=\"'batch:update'\"\r\n                    type=\"edit\"\r\n                    theme=\"twoTone\"\r\n                    twoToneColor=\"#faad14\"\r\n                    @click=\"edit(record)\"\r\n                    title=\"修改\"></a-icon>\r\n            <a-icon v-if=\"!record.hash\" type=\"link\" title=\"上链\" @click=\"showBlockchain(record.batchId)\"/>\r\n            <a-dropdown>\r\n              <a class=\"ant-dropdown-link\">\r\n                <a-icon type=\"plus\" title=\"添加\"/>\r\n              </a>\r\n              <a-menu slot=\"overlay\">\r\n                <a-menu-item v-hasPermission=\"'record:add'\">\r\n                  <a @click=\"addRecord(record.batchId)\">生产档案</a>\r\n                </a-menu-item>\r\n                <a-menu-item v-hasPermission=\"'report:add'\">\r\n                  <a @click=\"addReport(record.batchId)\">检验报告</a>\r\n                </a-menu-item>\r\n                <a-menu-item v-hasPermission=\"'report:add'\">\r\n                  <a @click=\"addApply(record.batchId)\">申请标签</a>\r\n                </a-menu-item>\r\n              </a-menu>\r\n            </a-dropdown>\r\n          </div>\r\n          <a-badge v-else\r\n                   status=\"warning\"\r\n                   text=\"无权限\"></a-badge>\r\n        </template>\r\n      </a-table>\r\n    </div>\r\n    <!-- 修改批次 -->\r\n    <batch-edit ref=\"batchEdit\"\r\n                @success=\"handleBatchEditSuccess\"\r\n                @close=\"handleBatchEditClose\"\r\n                :batchEditVisiable=\"batchEditVisiable\">\r\n    </batch-edit>\r\n    <!-- 新增生产档案 -->\r\n    <record-add @success=\"handleRecordAddSuccess\"\r\n                @close=\"handleRecordAddClose\"\r\n                :recordAddVisiable=\"recordAddVisiable\"\r\n                :batchId=\"batchId\">\r\n    </record-add>\r\n    <!-- 新增检验报告 -->\r\n    <report-add @success=\"handleReportAddSuccess\"\r\n                @close=\"handleReportAddClose\"\r\n                :reportAddVisiable=\"reportAddVisiable\"\r\n                :batchId=\"batchId\">\r\n    </report-add>\r\n    <!-- 申请标签 -->\r\n    <apply-add @success=\"handleApplyAddSuccess\"\r\n               @close=\"handleApplyAddClose\"\r\n               :applyAddVisiable=\"applyAddVisiable\"\r\n               :batchId=\"batchId\">\r\n    </apply-add>\r\n    <!-- 信息查看 -->\r\n    <info :data=\"info.data\"\r\n          :label=\"info.label\"\r\n          :infoVisiable=\"info.visiable\"\r\n          @close=\"handleInfoClose\">\r\n    </info>\r\n    <!-- 信息上链 -->\r\n    <a-modal title=\"批次上链\"\r\n             :confirmLoading=\"confirmLoading\"\r\n             :maskClosable=false\r\n             v-model=\"blockchainVisible\"\r\n             @ok=\"blockchainOk\"\r\n             :okText=\"confirmLoading?'上链中...':'确认'\"\r\n             cancelText=\"取消\">\r\n      上链批次号：{{this.batchId}}\r\n    </a-modal>\r\n  </a-card>\r\n</template>\r\n\r\n<script>\r\nimport RangeDate from '@/components/datetime/RangeDate'\r\nimport Info from '@/components/info/Info'\r\nimport BatchEdit from './BatchEdit'\r\nimport RecordAdd from '../record/RecordAdd'\r\nimport ReportAdd from '../report/ReportAdd'\r\nimport ApplyAdd from '../apply/ApplyAdd'\r\n\r\nexport default {\r\n  name: 'Batch',\r\n  components: { BatchEdit, RangeDate, RecordAdd, ReportAdd, Info, ApplyAdd },\r\n  data () {\r\n    return {\r\n      current_user: this.$store.state.account.user,\r\n      advanced: false,\r\n      dataSource: [],\r\n      selectedRowKeys: [],\r\n      queryParams: {},\r\n      sortedInfo: null,\r\n      loading: false,\r\n      batchEditVisiable: false,\r\n      recordAddVisiable: false,\r\n      applyAddVisiable: false,\r\n      blockchainVisible: false,\r\n      confirmLoading: false,\r\n      batchId: null,\r\n      reportAddVisiable: false,\r\n      paginationInfo: null,\r\n      info: {\r\n        visiable: false,\r\n        label: {\r\n          top: {\r\n            productName: '产品名',\r\n            batchId: '批次号',\r\n            producer: '生产者',\r\n            informTitle: '通知标题',\r\n            informContent: '通知内容',\r\n            produceDate: '生产日期',\r\n            createTime: '创建时间',\r\n            hash: '验证hash'\r\n          }\r\n        },\r\n        data: {}\r\n      },\r\n      pagination: {\r\n        pageSizeOptions: ['10', '20', '30', '40', '100'],\r\n        defaultCurrent: 1,\r\n        defaultPageSize: 10,\r\n        showQuickJumper: true,\r\n        showSizeChanger: true,\r\n        showTotal: (total, range) => `显示 ${range[0]} ~ ${range[1]} 条记录，共 ${total} 条记录`\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    columns () {\r\n      let { sortedInfo } = this\r\n      sortedInfo = sortedInfo || {}\r\n      return [{\r\n        title: '产品名',\r\n        dataIndex: 'productName'\r\n      }, {\r\n        title: '批次号',\r\n        dataIndex: 'batchId'\r\n      }, {\r\n        title: '批次名',\r\n        dataIndex: 'batchName'\r\n      }, {\r\n        title: '生产者',\r\n        dataIndex: 'producer'\r\n      }, {\r\n        title: '生产日期',\r\n        dataIndex: 'produceDate'\r\n      }, {\r\n        title: '创建时间',\r\n        dataIndex: 'createTime',\r\n        sorter: true,\r\n        sortOrder: sortedInfo.columnKey === 'createTime' && sortedInfo.order\r\n      }, {\r\n        title: '操作',\r\n        dataIndex: 'operation',\r\n        scopedSlots: { customRender: 'operation' },\r\n        fixed: 'right',\r\n        width: 120\r\n      }]\r\n    },\r\n    rowSelection () {\r\n      let that = this\r\n      return {\r\n        onChange: (selectedRowKeys, selectedRows) => {\r\n          that.selectedRowKeys = selectedRowKeys\r\n        },\r\n        getCheckboxProps: record => ({\r\n          props: {\r\n            disabled: record.creator !== that.current_user.username,\r\n            name: record.creator\r\n          }\r\n        })\r\n      }\r\n    }\r\n  },\r\n  mounted () {\r\n    this.fetch()\r\n  },\r\n  methods: {\r\n    showBlockchain (batchId) {\r\n      this.batchId = batchId\r\n      this.blockchainVisible = true\r\n    },\r\n    blockchainOk () {\r\n      this.confirmLoading = true\r\n      this.$post('batch/blockchain', {\r\n        batchId: this.batchId\r\n      }).then(() => {\r\n        this.$message.success('上链成功')\r\n        this.confirmLoading = false\r\n        this.blockchainVisible = false\r\n        this.search()\r\n      }).catch(() => {\r\n        this.confirmLoading = false\r\n      })\r\n    },\r\n    view (record) {\r\n      this.info.data = record\r\n      this.info.visiable = true\r\n    },\r\n    handleInfoClose () {\r\n      this.info.visiable = false\r\n    },\r\n    addApply (id) {\r\n      this.batchId = id\r\n      this.applyAddVisiable = true\r\n    },\r\n    handleApplyAddClose () {\r\n      this.applyAddVisiable = false\r\n    },\r\n    handleApplyAddSuccess () {\r\n      this.applyAddVisiable = false\r\n      this.$message.success('提交成功')\r\n    },\r\n    addRecord (id) {\r\n      this.batchId = id\r\n      this.recordAddVisiable = true\r\n    },\r\n    handleRecordAddClose () {\r\n      this.recordAddVisiable = false\r\n    },\r\n    handleRecordAddSuccess () {\r\n      this.recordAddVisiable = false\r\n      this.$message.success('新增档案成功')\r\n    },\r\n    addReport (id) {\r\n      this.batchId = id\r\n      this.reportAddVisiable = true\r\n    },\r\n    handleReportAddClose () {\r\n      this.reportAddVisiable = false\r\n    },\r\n    handleReportAddSuccess () {\r\n      this.reportAddVisiable = false\r\n      this.$message.success('新增检验报告成功')\r\n    },\r\n    handleBatchEditClose () {\r\n      this.batchEditVisiable = false\r\n    },\r\n    handleBatchEditSuccess () {\r\n      this.batchEditVisiable = false\r\n      this.$message.success('修改批次成功')\r\n      this.fetch()\r\n    },\r\n    edit (record) {\r\n      this.batchEditVisiable = true\r\n      this.$refs.batchEdit.setFormValues(record)\r\n    },\r\n    handleDateChange (value) {\r\n      if (value) {\r\n        this.queryParams.createTimeFrom = value[0]\r\n        this.queryParams.createTimeTo = value[1]\r\n      }\r\n    },\r\n    batchDelete () {\r\n      if (!this.selectedRowKeys.length) {\r\n        this.$message.warning('请选择需要删除的记录')\r\n        return\r\n      }\r\n      let that = this\r\n      this.$confirm({\r\n        title: '确定删除所选中的记录?',\r\n        content: '当您点击确定按钮后，这些记录将会被彻底删除！',\r\n        centered: true,\r\n        onOk () {\r\n          that.$delete('batch/' + that.selectedRowKeys.join(',')).then(() => {\r\n            that.$message.success('删除成功')\r\n            that.selectedRowKeys = []\r\n            that.fetch()\r\n          })\r\n        },\r\n        onCancel () {\r\n          that.selectedRowKeys = []\r\n        }\r\n      })\r\n    },\r\n    search () {\r\n      let { sortedInfo } = this\r\n      let sortField, sortOrder\r\n      // 获取当前列的排序和列的过滤规则\r\n      if (sortedInfo) {\r\n        sortField = sortedInfo.field\r\n        sortOrder = sortedInfo.order\r\n      }\r\n      this.fetch({\r\n        sortField: sortField,\r\n        sortOrder: sortOrder,\r\n        ...this.queryParams\r\n      })\r\n    },\r\n    reset () {\r\n      // 取消选中\r\n      this.selectedRowKeys = []\r\n      // 重置列排序规则\r\n      this.sortedInfo = null\r\n      // 重置查询参数\r\n      this.queryParams = {}\r\n      // 清空时间选择\r\n      this.$refs.createTime.reset()\r\n      this.fetch()\r\n    },\r\n    handleTableChange (pagination, filters, sorter) {\r\n      // 将这三个参数赋值给Vue data，用于后续使用\r\n      this.paginationInfo = pagination\r\n      this.filteredInfo = filters\r\n      this.sortedInfo = sorter\r\n\r\n      this.fetch({\r\n        sortField: sorter.field,\r\n        sortOrder: sorter.order,\r\n        ...this.queryParams,\r\n        ...filters\r\n      })\r\n    },\r\n    fetch (params = {}) {\r\n      this.loading = true\r\n      params.creator = this.current_user.username\r\n      if (this.paginationInfo) {\r\n        // 如果分页信息不为空，则设置表格当前第几页，每页条数，并设置查询分页参数\r\n        this.$refs.TableInfo.pagination.current = this.paginationInfo.current\r\n        this.$refs.TableInfo.pagination.pageSize = this.paginationInfo.pageSize\r\n        params.pageSize = this.paginationInfo.pageSize\r\n        params.pageNum = this.paginationInfo.current\r\n      } else {\r\n        // 如果分页信息为空，则设置为默认值\r\n        params.pageSize = this.pagination.defaultPageSize\r\n        params.pageNum = this.pagination.defaultCurrent\r\n      }\r\n      this.$get('batch', {\r\n        ...params\r\n      }).then((r) => {\r\n        let data = r.data\r\n        this.dataSource = data.rows\r\n        const pagination = { ...this.pagination }\r\n        pagination.total = data.total\r\n        this.pagination = pagination\r\n        this.loading = false\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n@import \"../../../../static/less/Common\";\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/trace/batch/Batch.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('a-card',{staticClass:\"card-area\",attrs:{\"bordered\":false}},[_c('div',{class:_vm.advanced ? 'search' : null},[_c('a-form',{attrs:{\"layout\":\"horizontal\"}},[_c('div',{class:_vm.advanced ? null: 'fold'},[_c('a-row',[_c('a-col',{attrs:{\"md\":12,\"sm\":24}},[_c('a-form-item',{attrs:{\"label\":\"批次名\",\"labelCol\":{span: 5},\"wrapperCol\":{span: 18, offset: 1}}},[_c('a-input',{model:{value:(_vm.queryParams.batchName),callback:function ($$v) {_vm.$set(_vm.queryParams, \"batchName\", $$v)},expression:\"queryParams.batchName\"}})],1)],1),_vm._v(\" \"),_c('a-col',{attrs:{\"md\":12,\"sm\":24}},[_c('a-form-item',{attrs:{\"label\":\"创建时间\",\"labelCol\":{span: 5},\"wrapperCol\":{span: 18, offset: 1}}},[_c('range-date',{ref:\"createTime\",on:{\"change\":_vm.handleDateChange}})],1)],1)],1)],1),_vm._v(\" \"),_c('span',{staticStyle:{\"float\":\"right\",\"margin-top\":\"3px\"}},[_c('a-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.search}},[_vm._v(\"查询\")]),_vm._v(\" \"),_c('a-button',{staticStyle:{\"margin-left\":\"8px\"},on:{\"click\":_vm.reset}},[_vm._v(\"重置\")])],1)])],1),_vm._v(\" \"),_c('div',[_c('div',{staticClass:\"operator\"},[_c('a-button',{directives:[{name:\"hasPermission\",rawName:\"v-hasPermission\",value:('batch:delete'),expression:\"'batch:delete'\"}],attrs:{\"type\":\"primary\",\"ghost\":\"\"},on:{\"click\":_vm.batchDelete}},[_vm._v(\"删除\")])],1),_vm._v(\" \"),_c('a-table',{ref:\"TableInfo\",attrs:{\"columns\":_vm.columns,\"dataSource\":_vm.dataSource,\"rowKey\":\"batchId\",\"pagination\":_vm.pagination,\"loading\":_vm.loading,\"scroll\":{ x: 900 },\"rowSelection\":_vm.rowSelection},on:{\"change\":_vm.handleTableChange},scopedSlots:_vm._u([{key:\"operation\",fn:function(text, record){return [(_vm.current_user.username === record.creator)?_c('div',[_c('a-icon',{attrs:{\"type\":\"eye\",\"theme\":\"twoTone\",\"twoToneColor\":\"#42b983\",\"title\":\"查看\"},on:{\"click\":function($event){_vm.view(record)}}}),_vm._v(\" \"),_c('a-icon',{directives:[{name:\"hasPermission\",rawName:\"v-hasPermission\",value:('batch:update'),expression:\"'batch:update'\"}],attrs:{\"type\":\"edit\",\"theme\":\"twoTone\",\"twoToneColor\":\"#faad14\",\"title\":\"修改\"},on:{\"click\":function($event){_vm.edit(record)}}}),_vm._v(\" \"),(!record.hash)?_c('a-icon',{attrs:{\"type\":\"link\",\"title\":\"上链\"},on:{\"click\":function($event){_vm.showBlockchain(record.batchId)}}}):_vm._e(),_vm._v(\" \"),_c('a-dropdown',[_c('a',{staticClass:\"ant-dropdown-link\"},[_c('a-icon',{attrs:{\"type\":\"plus\",\"title\":\"添加\"}})],1),_vm._v(\" \"),_c('a-menu',{attrs:{\"slot\":\"overlay\"},slot:\"overlay\"},[_c('a-menu-item',{directives:[{name:\"hasPermission\",rawName:\"v-hasPermission\",value:('record:add'),expression:\"'record:add'\"}]},[_c('a',{on:{\"click\":function($event){_vm.addRecord(record.batchId)}}},[_vm._v(\"生产档案\")])]),_vm._v(\" \"),_c('a-menu-item',{directives:[{name:\"hasPermission\",rawName:\"v-hasPermission\",value:('report:add'),expression:\"'report:add'\"}]},[_c('a',{on:{\"click\":function($event){_vm.addReport(record.batchId)}}},[_vm._v(\"检验报告\")])]),_vm._v(\" \"),_c('a-menu-item',{directives:[{name:\"hasPermission\",rawName:\"v-hasPermission\",value:('report:add'),expression:\"'report:add'\"}]},[_c('a',{on:{\"click\":function($event){_vm.addApply(record.batchId)}}},[_vm._v(\"申请标签\")])])],1)],1)],1):_c('a-badge',{attrs:{\"status\":\"warning\",\"text\":\"无权限\"}})]}}])})],1),_vm._v(\" \"),_c('batch-edit',{ref:\"batchEdit\",attrs:{\"batchEditVisiable\":_vm.batchEditVisiable},on:{\"success\":_vm.handleBatchEditSuccess,\"close\":_vm.handleBatchEditClose}}),_vm._v(\" \"),_c('record-add',{attrs:{\"recordAddVisiable\":_vm.recordAddVisiable,\"batchId\":_vm.batchId},on:{\"success\":_vm.handleRecordAddSuccess,\"close\":_vm.handleRecordAddClose}}),_vm._v(\" \"),_c('report-add',{attrs:{\"reportAddVisiable\":_vm.reportAddVisiable,\"batchId\":_vm.batchId},on:{\"success\":_vm.handleReportAddSuccess,\"close\":_vm.handleReportAddClose}}),_vm._v(\" \"),_c('apply-add',{attrs:{\"applyAddVisiable\":_vm.applyAddVisiable,\"batchId\":_vm.batchId},on:{\"success\":_vm.handleApplyAddSuccess,\"close\":_vm.handleApplyAddClose}}),_vm._v(\" \"),_c('info',{attrs:{\"data\":_vm.info.data,\"label\":_vm.info.label,\"infoVisiable\":_vm.info.visiable},on:{\"close\":_vm.handleInfoClose}}),_vm._v(\" \"),_c('a-modal',{attrs:{\"title\":\"批次上链\",\"confirmLoading\":_vm.confirmLoading,\"maskClosable\":false,\"okText\":_vm.confirmLoading?'上链中...':'确认',\"cancelText\":\"取消\"},on:{\"ok\":_vm.blockchainOk},model:{value:(_vm.blockchainVisible),callback:function ($$v) {_vm.blockchainVisible=$$v},expression:\"blockchainVisible\"}},[_vm._v(\"\\n    上链批次号：\"+_vm._s(this.batchId)+\"\\n  \")])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-bfdc5e7c\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/views/trace/batch/Batch.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-bfdc5e7c\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./Batch.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./Batch.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./Batch.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-bfdc5e7c\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./Batch.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-bfdc5e7c\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/trace/batch/Batch.vue\n// module id = null\n// module chunks = ","<template>\r\n  <a-drawer title=\"申请标签\"\r\n            :maskClosable=\"false\"\r\n            width=650\r\n            placement=\"right\"\r\n            :closable=\"false\"\r\n            @close=\"onClose\"\r\n            :visible=\"applyAddVisiable\"\r\n            style=\"height: calc(100% - 55px);overflow: auto;padding-bottom: 53px;\">\r\n    <a-form :form=\"form\">\r\n      <a-form-item label='批次ID'\r\n                   v-bind=\"formItemLayout\">\r\n        <a-input readOnly v-decorator=\"['batchId',\r\n                   {initialValue: batchId,\r\n                     rules: [\r\n                    { required: true, message: '不能为空'}\r\n                  ]}]\" />\r\n      </a-form-item>\r\n      <a-form-item label='申请数量'\r\n                   v-bind=\"formItemLayout\">\r\n        <a-input v-decorator=\"['num',\r\n                   {rules: [\r\n                    { required: true, message: '不能为空'}\r\n                  ]}]\" />\r\n      </a-form-item>\r\n    </a-form>\r\n    <div class=\"drawer-bootom-button\">\r\n      <a-popconfirm title=\"确定放弃编辑？\"\r\n                    @confirm=\"onClose\"\r\n                    okText=\"确定\"\r\n                    cancelText=\"取消\">\r\n        <a-button style=\"margin-right: .8rem\">取消</a-button>\r\n      </a-popconfirm>\r\n      <a-button @click=\"handleSubmit\"\r\n                type=\"primary\"\r\n                :loading=\"loading\">提交</a-button>\r\n    </div>\r\n  </a-drawer>\r\n</template>\r\n<script>\r\nconst formItemLayout = {\r\n  labelCol: { span: 3 },\r\n  wrapperCol: { span: 18 }\r\n}\r\nexport default {\r\n  name: 'ApplyAdd',\r\n  props: {\r\n    applyAddVisiable: {\r\n      default: false\r\n    },\r\n    batchId: {}\r\n  },\r\n  data () {\r\n    return {\r\n      loading: false,\r\n      formItemLayout,\r\n      form: this.$form.createForm(this)\r\n    }\r\n  },\r\n  methods: {\r\n    reset () {\r\n      this.loading = false\r\n      this.apply = {}\r\n      this.form.resetFields()\r\n    },\r\n    onClose () {\r\n      this.reset()\r\n      this.$emit('close')\r\n    },\r\n    handleSubmit () {\r\n      this.form.validateFields((err, values) => {\r\n        if (!err) {\r\n          if (values.num <= 0) {\r\n            this.$message.error('数量必须大于0')\r\n            return\r\n          }\r\n          this.loading = true\r\n          this.$post('apply', values).then(() => {\r\n            this.reset()\r\n            this.$emit('success')\r\n          }).catch(() => {\r\n            this.loading = false\r\n          })\r\n        }\r\n      })\r\n    }\r\n  },\r\n  watch: {\r\n    applyAddVisiable () {\r\n      if (this.applyAddVisiable) {\r\n        this.apply.batchId = this.batchId\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/trace/apply/ApplyAdd.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('a-drawer',{staticStyle:{\"height\":\"calc(100% - 55px)\",\"overflow\":\"auto\",\"padding-bottom\":\"53px\"},attrs:{\"title\":\"申请标签\",\"maskClosable\":false,\"width\":\"650\",\"placement\":\"right\",\"closable\":false,\"visible\":_vm.applyAddVisiable},on:{\"close\":_vm.onClose}},[_c('a-form',{attrs:{\"form\":_vm.form}},[_c('a-form-item',_vm._b({attrs:{\"label\":\"批次ID\"}},'a-form-item',_vm.formItemLayout,false),[_c('a-input',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:(['batchId',\n                 {initialValue: _vm.batchId,\n                   rules: [\n                  { required: true, message: '不能为空'}\n                ]}]),expression:\"['batchId',\\n                 {initialValue: batchId,\\n                   rules: [\\n                  { required: true, message: '不能为空'}\\n                ]}]\"}],attrs:{\"readOnly\":\"\"}})],1),_vm._v(\" \"),_c('a-form-item',_vm._b({attrs:{\"label\":\"申请数量\"}},'a-form-item',_vm.formItemLayout,false),[_c('a-input',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:(['num',\n                 {rules: [\n                  { required: true, message: '不能为空'}\n                ]}]),expression:\"['num',\\n                 {rules: [\\n                  { required: true, message: '不能为空'}\\n                ]}]\"}]})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"drawer-bootom-button\"},[_c('a-popconfirm',{attrs:{\"title\":\"确定放弃编辑？\",\"okText\":\"确定\",\"cancelText\":\"取消\"},on:{\"confirm\":_vm.onClose}},[_c('a-button',{staticStyle:{\"margin-right\":\".8rem\"}},[_vm._v(\"取消\")])],1),_vm._v(\" \"),_c('a-button',{attrs:{\"type\":\"primary\",\"loading\":_vm.loading},on:{\"click\":_vm.handleSubmit}},[_vm._v(\"提交\")])],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-7de13245\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/views/trace/apply/ApplyAdd.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./ApplyAdd.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./ApplyAdd.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-7de13245\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./ApplyAdd.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/trace/apply/ApplyAdd.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}