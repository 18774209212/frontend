{"version":3,"sources":["webpack:///src/views/system/role/RoleInfo.vue","webpack:///./src/views/system/role/RoleInfo.vue?214f","webpack:///./src/views/system/role/RoleInfo.vue","webpack:///src/views/system/role/Role.vue","webpack:///./src/views/system/role/Role.vue?b32d","webpack:///./src/views/system/role/Role.vue","webpack:///src/views/system/role/RoleEdit.vue","webpack:///./src/views/system/role/RoleEdit.vue?56c1","webpack:///./src/views/system/role/RoleEdit.vue","webpack:///src/views/system/role/RoleAdd.vue","webpack:///./src/views/system/role/RoleAdd.vue?6699","webpack:///./src/views/system/role/RoleAdd.vue"],"names":["RoleInfo","name","props","roleInfoVisiable","require","default","roleInfoData","data","key","Date","loading","checkedKeys","menuTreeData","methods","close","this","$emit","watch","_this","$get","then","r","rows","children","roleId","length","splice","role_RoleInfo","render","_vm","_h","$createElement","_c","_self","staticStyle","height","overflow","padding-bottom","attrs","title","maskClosable","width","placement","closable","visible","on","type","_v","_s","roleName","remark","createTime","modifyTime","checkStrictly","checkable","defaultCheckedKeys","defaultExpandedKeys","treeData","staticRenderFns","Component","__webpack_require__","normalizeComponent","__webpack_exports__","Role","components","RangeDate","RoleAdd","RoleEdit","advanced","roleInfo","visiable","roleAdd","roleEdit","queryParams","createTimeFrom","createTimeTo","dataSource","sortedInfo","paginationInfo","selectedRowKeys","pagination","pageSizeOptions","defaultCurrent","defaultPageSize","showQuickJumper","showSizeChanger","showTotal","total","range","computed","columns","dataIndex","scopedSlots","customRender","sorter","sortOrder","columnKey","order","mounted","fetch","onSelectChange","add","handleRoleAddClose","handleRoleAddSuccess","$message","success","search","view","record","handleRoleInfoClose","edit","$refs","setFormValues","handleRoleEditSuccess","handleRoleEditClose","handleDateChange","value","batchDelete","that","$confirm","content","centered","onOk","roleIds","$delete","join","onCancel","warning","exprotExccel","sortField","field","$export","extends_default","reset","TableInfo","current","pageSize","handleTableChange","filters","params","arguments","undefined","pageNum","role_Role","staticClass","bordered","class","layout","md","sm","label","labelCol","span","wrapperCol","offset","model","callback","$$v","$set","expression","ref","change","float","margin-top","click","margin-left","directives","rawName","ghost","slot","rowKey","rowSelection","onChange","scroll","x","_u","fn","text","max-width","margin-bottom","theme","twoToneColor","$event","roleAddVisiable","roleEditVisiable","ssrContext","formItemLayout","menuTreeKey","form","$form","createForm","menuSelectStatus","menuSelectHelp","role","menuId","allTreeKeys","expandedKeys","resetFields","onClose","expandAll","closeAll","enableRelate","disableRelate","handleCheck","is_default","checked","handleExpand","_ref","objectWithoutProperties_default","fields","keys_default","forEach","indexOf","getFieldDecorator","obj","setFieldsValue","handleSubmit","_this2","checkedArr","validateFields","err","values","$put","catch","_this3","ids","role_RoleEdit","_b","readOnly","rules","max","message","validateStatus","help","check","expand","trigger","okText","cancelText","confirm","margin-right","handleRoleNameBlur","formData","$post","getFieldValue","role_RoleAdd","initialValue","required","blur"],"mappings":"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","file":"static/js/6.8f645695bea675380172.js","sourcesContent":["<template>\n  <a-drawer\n    title=\"角色信息\"\n    :maskClosable=\"false\"\n    width=650\n    placement=\"right\"\n    :closable=\"true\"\n    @close=\"close\"\n    :visible=\"roleInfoVisiable\"\n    style=\"height: calc(100% - 55px);overflow: auto;padding-bottom: 53px;\">\n      <p><a-icon type=\"crown\" />&nbsp;&nbsp;角色名称：{{roleInfoData.roleName}}</p>\n      <p :title=\"roleInfoData.remark\"><a-icon type=\"book\" />&nbsp;&nbsp;角色描述：{{roleInfoData.remark}}</p>\n      <p><a-icon type=\"clock-circle\" />&nbsp;&nbsp;创建时间：{{roleInfoData.createTime}}</p>\n      <p><a-icon type=\"clock-circle\" />&nbsp;&nbsp;修改时间：{{roleInfoData.modifyTime? roleInfoData.modifyTime : '暂未修改'}}</p>\n      <p><a-icon type=\"trophy\" />&nbsp;&nbsp;所拥有的权限：\n        <a-tree\n          :key=\"key\"\n          :checkStrictly=\"true\"\n          :checkable=\"true\"\n          :defaultCheckedKeys=\"checkedKeys[0]\"\n          :defaultExpandedKeys=\"checkedKeys[0]\"\n          :treeData=\"menuTreeData\">\n        </a-tree>\n      </p>\n  </a-drawer>\n</template>\n<script>\nexport default {\n  name: 'RoleInfo',\n  props: {\n    roleInfoVisiable: {\n      require: true,\n      default: false\n    },\n    roleInfoData: {\n      require: true\n    }\n  },\n  data () {\n    return {\n      key: +new Date(),\n      loading: true,\n      checkedKeys: [],\n      menuTreeData: []\n    }\n  },\n  methods: {\n    close () {\n      this.$emit('close')\n      this.checkedKeys = []\n    }\n  },\n  watch: {\n    roleInfoVisiable () {\n      if (this.roleInfoVisiable) {\n        this.$get('admin/menu').then((r) => {\n          this.menuTreeData = r.data.rows.children\n          this.$get('admin/role/menu/' + this.roleInfoData.roleId).then((r) => {\n            let length = this.checkedKeys.length\n            this.checkedKeys.splice(0, length, r.data)\n            this.key = +new Date()\n          })\n        })\n      }\n    }\n  }\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/views/system/role/RoleInfo.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('a-drawer',{staticStyle:{\"height\":\"calc(100% - 55px)\",\"overflow\":\"auto\",\"padding-bottom\":\"53px\"},attrs:{\"title\":\"角色信息\",\"maskClosable\":false,\"width\":\"650\",\"placement\":\"right\",\"closable\":true,\"visible\":_vm.roleInfoVisiable},on:{\"close\":_vm.close}},[_c('p',[_c('a-icon',{attrs:{\"type\":\"crown\"}}),_vm._v(\"  角色名称：\"+_vm._s(_vm.roleInfoData.roleName))],1),_vm._v(\" \"),_c('p',{attrs:{\"title\":_vm.roleInfoData.remark}},[_c('a-icon',{attrs:{\"type\":\"book\"}}),_vm._v(\"  角色描述：\"+_vm._s(_vm.roleInfoData.remark))],1),_vm._v(\" \"),_c('p',[_c('a-icon',{attrs:{\"type\":\"clock-circle\"}}),_vm._v(\"  创建时间：\"+_vm._s(_vm.roleInfoData.createTime))],1),_vm._v(\" \"),_c('p',[_c('a-icon',{attrs:{\"type\":\"clock-circle\"}}),_vm._v(\"  修改时间：\"+_vm._s(_vm.roleInfoData.modifyTime? _vm.roleInfoData.modifyTime : '暂未修改'))],1),_vm._v(\" \"),_c('p',[_c('a-icon',{attrs:{\"type\":\"trophy\"}}),_vm._v(\"  所拥有的权限：\\n      \"),_c('a-tree',{key:_vm.key,attrs:{\"checkStrictly\":true,\"checkable\":true,\"defaultCheckedKeys\":_vm.checkedKeys[0],\"defaultExpandedKeys\":_vm.checkedKeys[0],\"treeData\":_vm.menuTreeData}})],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-4355b025\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/views/system/role/RoleInfo.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./RoleInfo.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./RoleInfo.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4355b025\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./RoleInfo.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/system/role/RoleInfo.vue\n// module id = null\n// module chunks = ","<template>\n  <a-card :bordered=\"false\" class=\"card-area\">\n    <div :class=\"advanced ? 'search' : null\">\n      <!-- 搜索区域 -->\n      <a-form layout=\"horizontal\">\n        <div :class=\"advanced ? null: 'fold'\">\n          <a-row >\n            <a-col :md=\"12\" :sm=\"24\" >\n              <a-form-item\n                label=\"角色\"\n                :labelCol=\"{span: 5}\"\n                :wrapperCol=\"{span: 18, offset: 1}\">\n                <a-input v-model=\"queryParams.roleName\"/>\n              </a-form-item>\n            </a-col>\n            <a-col :md=\"12\" :sm=\"24\" >\n              <a-form-item\n                label=\"创建时间\"\n                :labelCol=\"{span: 5}\"\n                :wrapperCol=\"{span: 18, offset: 1}\">\n                <range-date @change=\"handleDateChange\" ref=\"createTime\"></range-date>\n              </a-form-item>\n            </a-col>\n          </a-row>\n        </div>\n        <span style=\"float: right; margin-top: 3px;\">\n          <a-button type=\"primary\" @click=\"search\">查询</a-button>\n          <a-button style=\"margin-left: 8px\" @click=\"reset\">重置</a-button>\n        </span>\n      </a-form>\n    </div>\n    <div>\n      <div class=\"operator\">\n        <a-button v-hasPermission=\"'admin:role:add'\" ghost type=\"primary\" @click=\"add\">新增</a-button>\n        <a-button v-hasPermission=\"'admin:role:delete'\" @click=\"batchDelete\">删除</a-button>\n        <a-dropdown v-hasPermission=\"'admin:role:export'\">\n          <a-menu slot=\"overlay\">\n            <a-menu-item key=\"export-data\" @click=\"exprotExccel\">导出Excel</a-menu-item>\n          </a-menu>\n          <a-button>\n            更多操作 <a-icon type=\"down\" />\n          </a-button>\n        </a-dropdown>\n      </div>\n      <!-- 表格区域 -->\n      <a-table ref=\"TableInfo\"\n               :columns=\"columns\"\n               :dataSource=\"dataSource\"\n               :pagination=\"pagination\"\n               :loading=\"loading\"\n               rowKey=\"roleId\"\n               :rowSelection=\"{selectedRowKeys: selectedRowKeys, onChange: onSelectChange}\"\n               :scroll=\"{ x: 900 }\"\n               @change=\"handleTableChange\">\n        <template slot=\"remark\" slot-scope=\"text, record\">\n          <a-popover placement=\"topLeft\">\n            <template slot=\"content\">\n              <div style=\"max-width: 200px\">{{text}}</div>\n            </template>\n            <p style=\"width: 200px;margin-bottom: 0\">{{text}}</p>\n          </a-popover>\n        </template>\n        <template slot=\"operation\" slot-scope=\"text, record\">\n          <a-icon v-hasPermission=\"'admin:role:update'\" type=\"setting\" theme=\"twoTone\" twoToneColor=\"#4a9ff5\" @click=\"edit(record)\" title=\"修改角色\"></a-icon>\n          &nbsp;\n          <a-icon type=\"eye\" theme=\"twoTone\" twoToneColor=\"#42b983\" @click=\"view(record)\" title=\"查看\"></a-icon>\n        </template>\n      </a-table>\n      <!-- 角色信息查看 -->\n      <role-info\n        @close=\"handleRoleInfoClose\"\n        :roleInfoVisiable=\"roleInfo.visiable\"\n        :roleInfoData=\"roleInfo.data\">\n      </role-info>\n      <!-- 新增角色 -->\n      <role-add\n        @close=\"handleRoleAddClose\"\n        @success=\"handleRoleAddSuccess\"\n        :roleAddVisiable=\"roleAdd.visiable\">\n      </role-add>\n      <!-- 修改角色 -->\n      <role-edit\n        ref=\"roleEdit\"\n        :roleInfoData=\"roleInfo.data\"\n        @close=\"handleRoleEditClose\"\n        @success=\"handleRoleEditSuccess\"\n        :roleEditVisiable=\"roleEdit.visiable\">\n      </role-edit>\n    </div>\n  </a-card>\n</template>\n\n<script>\nimport RangeDate from '@/components/datetime/RangeDate'\nimport RoleAdd from './RoleAdd'\nimport RoleInfo from './RoleInfo'\nimport RoleEdit from './RoleEdit'\n\nexport default {\n  name: 'Role',\n  components: {RangeDate, RoleInfo, RoleAdd, RoleEdit},\n  data () {\n    return {\n      advanced: false,\n      roleInfo: {\n        visiable: false,\n        data: {}\n      },\n      roleAdd: {\n        visiable: false\n      },\n      roleEdit: {\n        visiable: false\n      },\n      queryParams: {\n        createTimeFrom: '',\n        createTimeTo: ''\n      },\n      dataSource: [],\n      sortedInfo: null,\n      paginationInfo: null,\n      selectedRowKeys: [],\n      pagination: {\n        pageSizeOptions: ['10', '20', '30', '40', '100'],\n        defaultCurrent: 1,\n        defaultPageSize: 10,\n        showQuickJumper: true,\n        showSizeChanger: true,\n        showTotal: (total, range) => `显示 ${range[0]} ~ ${range[1]} 条记录，共 ${total} 条记录`\n      },\n      loading: false\n    }\n  },\n  computed: {\n    columns () {\n      let { sortedInfo } = this\n      sortedInfo = sortedInfo || {}\n      return [{\n        title: '角色',\n        dataIndex: 'roleName'\n      }, {\n        title: '描述',\n        dataIndex: 'remark',\n        scopedSlots: { customRender: 'remark' },\n        width: 350\n      }, {\n        title: '创建时间',\n        dataIndex: 'createTime',\n        sorter: true,\n        sortOrder: sortedInfo.columnKey === 'createTime' && sortedInfo.order\n      }, {\n        title: '修改时间',\n        dataIndex: 'modifyTime',\n        sorter: true,\n        sortOrder: sortedInfo.columnKey === 'modifyTime' && sortedInfo.order\n      }, {\n        title: '操作',\n        dataIndex: 'operation',\n        scopedSlots: { customRender: 'operation' }\n      }]\n    }\n  },\n  mounted () {\n    this.fetch()\n  },\n  methods: {\n    onSelectChange (selectedRowKeys) {\n      this.selectedRowKeys = selectedRowKeys\n    },\n    add () {\n      this.roleAdd.visiable = true\n    },\n    handleRoleAddClose () {\n      this.roleAdd.visiable = false\n    },\n    handleRoleAddSuccess () {\n      this.roleAdd.visiable = false\n      this.$message.success('新增角色成功')\n      this.search()\n    },\n    view (record) {\n      this.roleInfo.data = record\n      this.roleInfo.visiable = true\n    },\n    handleRoleInfoClose () {\n      this.roleInfo.visiable = false\n    },\n    edit (record) {\n      this.$refs.roleEdit.setFormValues(record)\n      this.roleInfo.data = record\n      this.roleEdit.visiable = true\n    },\n    handleRoleEditSuccess () {\n      this.roleEdit.visiable = false\n      this.$message.success('修改角色成功')\n      this.search()\n    },\n    handleRoleEditClose () {\n      this.roleEdit.visiable = false\n    },\n    handleDateChange (value) {\n      if (value) {\n        this.queryParams.createTimeFrom = value[0]\n        this.queryParams.createTimeTo = value[1]\n      }\n    },\n    batchDelete () {\n      if (!this.selectedRowKeys.length) {\n        this.$message.warning('请选择需要删除的记录')\n        return\n      }\n      let that = this\n      this.$confirm({\n        title: '确定删除所选中的记录?',\n        content: '当您点击确定按钮后，这些记录将会被彻底删除',\n        centered: true,\n        onOk () {\n          let roleIds = that.selectedRowKeys\n          that.$delete('admin/role/' + roleIds.join(',')).then(() => {\n            that.$message.success('删除成功')\n            that.selectedRowKeys = []\n            that.search()\n          })\n        },\n        onCancel () {\n          that.selectedRowKeys = []\n        }\n      })\n    },\n    exprotExccel () {\n      let {sortedInfo} = this\n      let sortField, sortOrder\n      // 获取当前列的排序和列的过滤规则\n      if (sortedInfo) {\n        sortField = sortedInfo.field\n        sortOrder = sortedInfo.order\n      }\n      this.$export('admin/role/excel', {\n        sortField: sortField,\n        sortOrder: sortOrder,\n        ...this.queryParams\n      })\n    },\n    search () {\n      let {sortedInfo} = this\n      let sortField, sortOrder\n      // 获取当前列的排序和列的过滤规则\n      if (sortedInfo) {\n        sortField = sortedInfo.field\n        sortOrder = sortedInfo.order\n      }\n      this.fetch({\n        sortField: sortField,\n        sortOrder: sortOrder,\n        ...this.queryParams\n      })\n    },\n    reset () {\n      // 取消选中\n      this.selectedRowKeys = []\n      // 重置分页\n      this.$refs.TableInfo.pagination.current = this.pagination.defaultCurrent\n      if (this.paginationInfo) {\n        this.paginationInfo.current = this.pagination.defaultCurrent\n        this.paginationInfo.pageSize = this.pagination.defaultPageSize\n      }\n      // 重置列排序规则\n      this.sortedInfo = null\n      // 重置查询参数\n      this.queryParams = {}\n      // 清空时间选择\n      this.$refs.createTime.reset()\n      this.fetch()\n    },\n    handleTableChange (pagination, filters, sorter) {\n      // 将这两个参数赋值给Vue data，用于后续使用\n      this.paginationInfo = pagination\n      this.sortedInfo = sorter\n      this.fetch({\n        sortField: sorter.field,\n        sortOrder: sorter.order,\n        ...this.queryParams\n      })\n    },\n    fetch (params = {}) {\n      this.loading = true\n      if (this.paginationInfo) {\n        // 如果分页信息不为空，则设置表格当前第几页，每页条数，并设置查询分页参数\n        this.$refs.TableInfo.pagination.current = this.paginationInfo.current\n        this.$refs.TableInfo.pagination.pageSize = this.paginationInfo.pageSize\n        params.pageSize = this.paginationInfo.pageSize\n        params.pageNum = this.paginationInfo.current\n      } else {\n        // 如果分页信息为空，则设置为默认值\n        params.pageSize = this.pagination.defaultPageSize\n        params.pageNum = this.pagination.defaultCurrent\n      }\n      this.$get('admin/role', {\n        ...params\n      }).then((r) => {\n        let data = r.data\n        const pagination = { ...this.pagination }\n        pagination.total = data.total\n        this.dataSource = data.rows\n        this.pagination = pagination\n        this.loading = false\n      })\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n@import \"../../../../static/less/Common\";\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/system/role/Role.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('a-card',{staticClass:\"card-area\",attrs:{\"bordered\":false}},[_c('div',{class:_vm.advanced ? 'search' : null},[_c('a-form',{attrs:{\"layout\":\"horizontal\"}},[_c('div',{class:_vm.advanced ? null: 'fold'},[_c('a-row',[_c('a-col',{attrs:{\"md\":12,\"sm\":24}},[_c('a-form-item',{attrs:{\"label\":\"角色\",\"labelCol\":{span: 5},\"wrapperCol\":{span: 18, offset: 1}}},[_c('a-input',{model:{value:(_vm.queryParams.roleName),callback:function ($$v) {_vm.$set(_vm.queryParams, \"roleName\", $$v)},expression:\"queryParams.roleName\"}})],1)],1),_vm._v(\" \"),_c('a-col',{attrs:{\"md\":12,\"sm\":24}},[_c('a-form-item',{attrs:{\"label\":\"创建时间\",\"labelCol\":{span: 5},\"wrapperCol\":{span: 18, offset: 1}}},[_c('range-date',{ref:\"createTime\",on:{\"change\":_vm.handleDateChange}})],1)],1)],1)],1),_vm._v(\" \"),_c('span',{staticStyle:{\"float\":\"right\",\"margin-top\":\"3px\"}},[_c('a-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.search}},[_vm._v(\"查询\")]),_vm._v(\" \"),_c('a-button',{staticStyle:{\"margin-left\":\"8px\"},on:{\"click\":_vm.reset}},[_vm._v(\"重置\")])],1)])],1),_vm._v(\" \"),_c('div',[_c('div',{staticClass:\"operator\"},[_c('a-button',{directives:[{name:\"hasPermission\",rawName:\"v-hasPermission\",value:('admin:role:add'),expression:\"'admin:role:add'\"}],attrs:{\"ghost\":\"\",\"type\":\"primary\"},on:{\"click\":_vm.add}},[_vm._v(\"新增\")]),_vm._v(\" \"),_c('a-button',{directives:[{name:\"hasPermission\",rawName:\"v-hasPermission\",value:('admin:role:delete'),expression:\"'admin:role:delete'\"}],on:{\"click\":_vm.batchDelete}},[_vm._v(\"删除\")]),_vm._v(\" \"),_c('a-dropdown',{directives:[{name:\"hasPermission\",rawName:\"v-hasPermission\",value:('admin:role:export'),expression:\"'admin:role:export'\"}]},[_c('a-menu',{attrs:{\"slot\":\"overlay\"},slot:\"overlay\"},[_c('a-menu-item',{key:\"export-data\",on:{\"click\":_vm.exprotExccel}},[_vm._v(\"导出Excel\")])],1),_vm._v(\" \"),_c('a-button',[_vm._v(\"\\n          更多操作 \"),_c('a-icon',{attrs:{\"type\":\"down\"}})],1)],1)],1),_vm._v(\" \"),_c('a-table',{ref:\"TableInfo\",attrs:{\"columns\":_vm.columns,\"dataSource\":_vm.dataSource,\"pagination\":_vm.pagination,\"loading\":_vm.loading,\"rowKey\":\"roleId\",\"rowSelection\":{selectedRowKeys: _vm.selectedRowKeys, onChange: _vm.onSelectChange},\"scroll\":{ x: 900 }},on:{\"change\":_vm.handleTableChange},scopedSlots:_vm._u([{key:\"remark\",fn:function(text, record){return [_c('a-popover',{attrs:{\"placement\":\"topLeft\"}},[_c('template',{slot:\"content\"},[_c('div',{staticStyle:{\"max-width\":\"200px\"}},[_vm._v(_vm._s(text))])]),_vm._v(\" \"),_c('p',{staticStyle:{\"width\":\"200px\",\"margin-bottom\":\"0\"}},[_vm._v(_vm._s(text))])],2)]}},{key:\"operation\",fn:function(text, record){return [_c('a-icon',{directives:[{name:\"hasPermission\",rawName:\"v-hasPermission\",value:('admin:role:update'),expression:\"'admin:role:update'\"}],attrs:{\"type\":\"setting\",\"theme\":\"twoTone\",\"twoToneColor\":\"#4a9ff5\",\"title\":\"修改角色\"},on:{\"click\":function($event){_vm.edit(record)}}}),_vm._v(\"\\n         \\n        \"),_c('a-icon',{attrs:{\"type\":\"eye\",\"theme\":\"twoTone\",\"twoToneColor\":\"#42b983\",\"title\":\"查看\"},on:{\"click\":function($event){_vm.view(record)}}})]}}])}),_vm._v(\" \"),_c('role-info',{attrs:{\"roleInfoVisiable\":_vm.roleInfo.visiable,\"roleInfoData\":_vm.roleInfo.data},on:{\"close\":_vm.handleRoleInfoClose}}),_vm._v(\" \"),_c('role-add',{attrs:{\"roleAddVisiable\":_vm.roleAdd.visiable},on:{\"close\":_vm.handleRoleAddClose,\"success\":_vm.handleRoleAddSuccess}}),_vm._v(\" \"),_c('role-edit',{ref:\"roleEdit\",attrs:{\"roleInfoData\":_vm.roleInfo.data,\"roleEditVisiable\":_vm.roleEdit.visiable},on:{\"close\":_vm.handleRoleEditClose,\"success\":_vm.handleRoleEditSuccess}})],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-21f5e9eb\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/views/system/role/Role.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-21f5e9eb\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./Role.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./Role.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./Role.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-21f5e9eb\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./Role.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-21f5e9eb\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/system/role/Role.vue\n// module id = null\n// module chunks = ","<template>\n  <a-drawer title=\"修改角色\"\n            :maskClosable=\"false\"\n            width=650\n            placement=\"right\"\n            :closable=\"false\"\n            @close=\"onClose\"\n            :visible=\"roleEditVisiable\"\n            style=\"height: calc(100% - 55px);overflow: auto;padding-bottom: 53px;\">\n    <a-form :form=\"form\">\n      <a-form-item label='角色名称'\n                   v-bind=\"formItemLayout\">\n        <a-input readOnly\n                 v-decorator=\"['roleName']\" />\n      </a-form-item>\n      <a-form-item label='角色描述'\n                   v-bind=\"formItemLayout\">\n        <a-textarea :rows=\"4\"\n                    v-decorator=\"[\n          'remark',\n          {rules: [\n            { max: 50, message: '长度不能超过50个字符'}\n          ]}]\">\n        </a-textarea>\n      </a-form-item>\n      <a-form-item label='权限选择'\n                   style=\"margin-bottom: 2rem\"\n                   :validateStatus=\"menuSelectStatus\"\n                   :help=\"menuSelectHelp\"\n                   v-bind=\"formItemLayout\">\n        <a-tree :key=\"menuTreeKey\"\n                ref=\"menuTree\"\n                :checkable=\"true\"\n                :checkStrictly=\"checkStrictly\"\n                :defaultCheckedKeys=\"defaultCheckedKeys[0]\"\n                @check=\"handleCheck\"\n                @expand=\"handleExpand\"\n                :expandedKeys=\"expandedKeys\"\n                :treeData=\"menuTreeData\">\n        </a-tree>\n      </a-form-item>\n    </a-form>\n    <div class=\"drawer-bootom-button\">\n      <a-dropdown style=\"float: left\"\n                  :trigger=\"['click']\"\n                  placement=\"topCenter\">\n        <a-menu slot=\"overlay\">\n          <a-menu-item key=\"1\"\n                       @click=\"expandAll\">展开所有</a-menu-item>\n          <a-menu-item key=\"2\"\n                       @click=\"closeAll\">合并所有</a-menu-item>\n          <a-menu-item key=\"3\"\n                       @click=\"enableRelate\">父子关联</a-menu-item>\n          <a-menu-item key=\"4\"\n                       @click=\"disableRelate\">取消关联</a-menu-item>\n        </a-menu>\n        <a-button>\n          树操作\n          <a-icon type=\"up\" />\n        </a-button>\n      </a-dropdown>\n      <a-popconfirm title=\"确定放弃编辑？\"\n                    @confirm=\"onClose\"\n                    okText=\"确定\"\n                    cancelText=\"取消\">\n        <a-button style=\"margin-right: .8rem\">取消</a-button>\n      </a-popconfirm>\n      <a-button @click=\"handleSubmit\"\n                type=\"primary\"\n                :loading=\"loading\">提交</a-button>\n    </div>\n  </a-drawer>\n</template>\n<script>\nconst formItemLayout = {\n  labelCol: { span: 3 },\n  wrapperCol: { span: 18 }\n}\nexport default {\n  name: 'RoleEdit',\n  props: {\n    roleEditVisiable: {\n      default: false\n    },\n    roleInfoData: {\n      require: true\n    }\n  },\n  data () {\n    return {\n      menuTreeKey: +new Date(),\n      loading: false,\n      formItemLayout,\n      form: this.$form.createForm(this),\n      menuSelectStatus: '',\n      menuSelectHelp: '',\n      role: {\n        menuId: ''\n      },\n      menuTreeData: [],\n      allTreeKeys: [],\n      checkedKeys: [],\n      defaultCheckedKeys: [],\n      expandedKeys: [],\n      checkStrictly: true\n    }\n  },\n  methods: {\n    reset () {\n      this.menuTreeKey = +new Date()\n      this.expandedKeys = []\n      this.checkedKeys = []\n      this.defaultCheckedKeys = []\n      this.menuSelectStatus = this.menuSelectHelp = ''\n      this.loading = false\n      this.form.resetFields()\n    },\n    onClose () {\n      this.reset()\n      this.$emit('close')\n    },\n    expandAll () {\n      this.expandedKeys = this.allTreeKeys\n    },\n    closeAll () {\n      this.expandedKeys = []\n    },\n    enableRelate () {\n      this.checkStrictly = false\n    },\n    disableRelate () {\n      this.checkStrictly = true\n    },\n    handleCheck (checkedKeys) {\n      this.checkedKeys = checkedKeys\n      let checkedArr = Object.is(checkedKeys.checked, undefined) ? checkedKeys : checkedKeys.checked\n      if (checkedArr.length) {\n        this.menuSelectStatus = ''\n        this.menuSelectHelp = ''\n      } else {\n        this.menuSelectStatus = 'error'\n        this.menuSelectHelp = '请选择相应的权限'\n      }\n    },\n    handleExpand (expandedKeys) {\n      this.expandedKeys = expandedKeys\n    },\n    setFormValues ({ ...role }) {\n      let fields = ['roleName', 'remark']\n      Object.keys(role).forEach((key) => {\n        if (fields.indexOf(key) !== -1) {\n          this.form.getFieldDecorator(key)\n          let obj = {}\n          obj[key] = role[key]\n          this.form.setFieldsValue(obj)\n        }\n      })\n    },\n    handleSubmit () {\n      let checkedArr = Object.is(this.checkedKeys.checked, undefined) ? this.checkedKeys : this.checkedKeys.checked\n      if (checkedArr.length === 0) {\n        this.menuSelectStatus = 'error'\n        this.menuSelectHelp = '请选择相应的权限'\n      } else {\n        this.form.validateFields((err, values) => {\n          if (!err) {\n            this.loading = true\n            values.roleId = this.roleInfoData.roleId\n            values.menuId = checkedArr.join(',')\n            this.$put('admin/role', values).then((r) => {\n              this.reset()\n              this.$emit('success')\n            }).catch(() => {\n              this.loading = false\n            })\n          }\n        })\n      }\n    }\n  },\n  watch: {\n    roleEditVisiable () {\n      if (this.roleEditVisiable) {\n        this.$get('admin/menu').then((r) => {\n          this.menuTreeData = r.data.rows.children\n          this.allTreeKeys = r.data.ids\n          this.$get('admin/role/menu/' + this.roleInfoData.roleId).then((r) => {\n            this.defaultCheckedKeys.splice(0, this.defaultCheckedKeys.length, r.data)\n            this.checkedKeys = r.data\n            this.expandedKeys = r.data\n            this.menuTreeKey = +new Date()\n          })\n        })\n      }\n    }\n  }\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/views/system/role/RoleEdit.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('a-drawer',{staticStyle:{\"height\":\"calc(100% - 55px)\",\"overflow\":\"auto\",\"padding-bottom\":\"53px\"},attrs:{\"title\":\"修改角色\",\"maskClosable\":false,\"width\":\"650\",\"placement\":\"right\",\"closable\":false,\"visible\":_vm.roleEditVisiable},on:{\"close\":_vm.onClose}},[_c('a-form',{attrs:{\"form\":_vm.form}},[_c('a-form-item',_vm._b({attrs:{\"label\":\"角色名称\"}},'a-form-item',_vm.formItemLayout,false),[_c('a-input',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:(['roleName']),expression:\"['roleName']\"}],attrs:{\"readOnly\":\"\"}})],1),_vm._v(\" \"),_c('a-form-item',_vm._b({attrs:{\"label\":\"角色描述\"}},'a-form-item',_vm.formItemLayout,false),[_c('a-textarea',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:([\n        'remark',\n        {rules: [\n          { max: 50, message: '长度不能超过50个字符'}\n        ]}]),expression:\"[\\n        'remark',\\n        {rules: [\\n          { max: 50, message: '长度不能超过50个字符'}\\n        ]}]\"}],attrs:{\"rows\":4}})],1),_vm._v(\" \"),_c('a-form-item',_vm._b({staticStyle:{\"margin-bottom\":\"2rem\"},attrs:{\"label\":\"权限选择\",\"validateStatus\":_vm.menuSelectStatus,\"help\":_vm.menuSelectHelp}},'a-form-item',_vm.formItemLayout,false),[_c('a-tree',{key:_vm.menuTreeKey,ref:\"menuTree\",attrs:{\"checkable\":true,\"checkStrictly\":_vm.checkStrictly,\"defaultCheckedKeys\":_vm.defaultCheckedKeys[0],\"expandedKeys\":_vm.expandedKeys,\"treeData\":_vm.menuTreeData},on:{\"check\":_vm.handleCheck,\"expand\":_vm.handleExpand}})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"drawer-bootom-button\"},[_c('a-dropdown',{staticStyle:{\"float\":\"left\"},attrs:{\"trigger\":['click'],\"placement\":\"topCenter\"}},[_c('a-menu',{attrs:{\"slot\":\"overlay\"},slot:\"overlay\"},[_c('a-menu-item',{key:\"1\",on:{\"click\":_vm.expandAll}},[_vm._v(\"展开所有\")]),_vm._v(\" \"),_c('a-menu-item',{key:\"2\",on:{\"click\":_vm.closeAll}},[_vm._v(\"合并所有\")]),_vm._v(\" \"),_c('a-menu-item',{key:\"3\",on:{\"click\":_vm.enableRelate}},[_vm._v(\"父子关联\")]),_vm._v(\" \"),_c('a-menu-item',{key:\"4\",on:{\"click\":_vm.disableRelate}},[_vm._v(\"取消关联\")])],1),_vm._v(\" \"),_c('a-button',[_vm._v(\"\\n        树操作\\n        \"),_c('a-icon',{attrs:{\"type\":\"up\"}})],1)],1),_vm._v(\" \"),_c('a-popconfirm',{attrs:{\"title\":\"确定放弃编辑？\",\"okText\":\"确定\",\"cancelText\":\"取消\"},on:{\"confirm\":_vm.onClose}},[_c('a-button',{staticStyle:{\"margin-right\":\".8rem\"}},[_vm._v(\"取消\")])],1),_vm._v(\" \"),_c('a-button',{attrs:{\"type\":\"primary\",\"loading\":_vm.loading},on:{\"click\":_vm.handleSubmit}},[_vm._v(\"提交\")])],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-096b8294\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/views/system/role/RoleEdit.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./RoleEdit.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./RoleEdit.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-096b8294\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./RoleEdit.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/system/role/RoleEdit.vue\n// module id = null\n// module chunks = ","<template>\n  <a-drawer title=\"新增角色\"\n            :maskClosable=\"false\"\n            width=650\n            placement=\"right\"\n            :closable=\"false\"\n            @close=\"onClose\"\n            :visible=\"roleAddVisiable\"\n            style=\"height: calc(100% - 55px);overflow: auto;padding-bottom: 53px;\">\n    <a-form :form=\"form\">\n      <a-form-item label='角色名称'\n                   v-bind=\"formItemLayout\"\n                   :validateStatus=\"validateStatus\"\n                   :help=\"help\">\n        <a-input @blur=\"handleRoleNameBlur\"\n                 v-decorator=\"['roleName',\n                   {initialValue:'',\n                     rules: [\n                    { required: true, message: '不能为空'}\n                  ]}]\" />\n      </a-form-item>\n      <a-form-item label='角色描述'\n                   v-bind=\"formItemLayout\">\n        <a-textarea :rows=\"4\"\n                    v-decorator=\"[\n          'remark',\n          {rules: [\n            { max: 50, message: '长度不能超过50个字符'}\n          ]}]\">\n        </a-textarea>\n      </a-form-item>\n      <a-form-item label='权限选择'\n                   style=\"margin-bottom: 2rem\"\n                   :validateStatus=\"menuSelectStatus\"\n                   :help=\"menuSelectHelp\"\n                   v-bind=\"formItemLayout\">\n        <a-tree :key=\"menuTreeKey\"\n                ref=\"menuTree\"\n                :checkable=\"true\"\n                :checkStrictly=\"checkStrictly\"\n                @check=\"handleCheck\"\n                @expand=\"handleExpand\"\n                :expandedKeys=\"expandedKeys\"\n                :treeData=\"menuTreeData\">\n        </a-tree>\n      </a-form-item>\n    </a-form>\n    <div class=\"drawer-bootom-button\">\n      <a-dropdown style=\"float: left\"\n                  :trigger=\"['click']\"\n                  placement=\"topCenter\">\n        <a-menu slot=\"overlay\">\n          <a-menu-item key=\"1\"\n                       @click=\"expandAll\">展开所有</a-menu-item>\n          <a-menu-item key=\"2\"\n                       @click=\"closeAll\">合并所有</a-menu-item>\n          <a-menu-item key=\"3\"\n                       @click=\"enableRelate\">父子关联</a-menu-item>\n          <a-menu-item key=\"4\"\n                       @click=\"disableRelate\">取消关联</a-menu-item>\n        </a-menu>\n        <a-button>\n          树操作\n          <a-icon type=\"up\" />\n        </a-button>\n      </a-dropdown>\n      <a-popconfirm title=\"确定放弃编辑？\"\n                    @confirm=\"onClose\"\n                    okText=\"确定\"\n                    cancelText=\"取消\">\n        <a-button style=\"margin-right: .8rem\">取消</a-button>\n      </a-popconfirm>\n      <a-button @click=\"handleSubmit\"\n                type=\"primary\"\n                :loading=\"loading\">提交</a-button>\n    </div>\n  </a-drawer>\n</template>\n<script>\nconst formItemLayout = {\n  labelCol: { span: 3 },\n  wrapperCol: { span: 18 }\n}\nexport default {\n  name: 'RoleAdd',\n  props: {\n    roleAddVisiable: {\n      default: false\n    }\n  },\n  data () {\n    return {\n      menuTreeKey: +new Date(),\n      loading: false,\n      formItemLayout,\n      form: this.$form.createForm(this),\n      validateStatus: '',\n      menuSelectStatus: '',\n      help: '',\n      menuSelectHelp: '',\n      checkedKeys: [],\n      expandedKeys: [],\n      menuTreeData: [],\n      allTreeKeys: [],\n      checkStrictly: true\n    }\n  },\n  methods: {\n    reset () {\n      this.menuTreeKey = +new Date()\n      this.expandedKeys = this.checkedKeys = []\n      this.validateStatus = this.help = ''\n      this.loading = false\n      this.form.resetFields()\n    },\n    onClose () {\n      this.reset()\n      this.$emit('close')\n    },\n    expandAll () {\n      this.expandedKeys = this.allTreeKeys\n    },\n    closeAll () {\n      this.expandedKeys = []\n    },\n    enableRelate () {\n      this.checkStrictly = false\n    },\n    disableRelate () {\n      this.checkStrictly = true\n    },\n    handleCheck (checkedKeys) {\n      this.checkedKeys = checkedKeys\n      let checkedArr = Object.is(checkedKeys.checked, undefined) ? checkedKeys : checkedKeys.checked\n      if (checkedArr.length) {\n        this.menuSelectStatus = ''\n        this.menuSelectHelp = ''\n      } else {\n        this.menuSelectStatus = 'error'\n        this.menuSelectHelp = '请选择相应的权限'\n      }\n    },\n    handleExpand (expandedKeys) {\n      this.expandedKeys = expandedKeys\n    },\n    handleSubmit () {\n      let checkedArr = Object.is(this.checkedKeys.checked, undefined) ? this.checkedKeys : this.checkedKeys.checked\n      if (this.validateStatus !== 'success') {\n        this.handleRoleNameBlur()\n      } else if (checkedArr.length === 0) {\n        this.menuSelectStatus = 'error'\n        this.menuSelectHelp = '请选择相应的权限'\n      } else {\n        this.form.validateFields((err, values) => {\n          if (!err) {\n            this.loading = true\n            values.menuId = checkedArr.join(',')\n            const formData = {}\n            Object.keys(values).forEach((key) => {\n              if (values[key]) {\n                formData[key] = values[key]\n              }\n            })\n            this.$post('admin/role', formData).then((r) => {\n              this.reset()\n              this.$emit('success')\n            }).catch(() => {\n              this.loading = false\n            })\n          }\n        })\n      }\n    },\n    handleRoleNameBlur () {\n      let roleName = this.form.getFieldValue('roleName')\n      if (roleName.length) {\n        if (roleName.length > 10) {\n          this.validateStatus = 'error'\n          this.help = '角色名称不能超过10个字符'\n        } else {\n          this.validateStatus = 'validating'\n          this.$get(`admin/role/check/${roleName}`).then((r) => {\n            if (r.data) {\n              this.validateStatus = 'success'\n              this.help = ''\n            } else {\n              this.validateStatus = 'error'\n              this.help = '抱歉，该角色名称已存在'\n            }\n          })\n        }\n      } else {\n        this.validateStatus = 'error'\n        this.help = '角色名称不能为空'\n      }\n    }\n  },\n  watch: {\n    roleAddVisiable () {\n      if (this.roleAddVisiable) {\n        this.$get('admin/menu').then((r) => {\n          this.menuTreeData = r.data.rows.children\n          this.allTreeKeys = r.data.ids\n        })\n      }\n    }\n  }\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/views/system/role/RoleAdd.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('a-drawer',{staticStyle:{\"height\":\"calc(100% - 55px)\",\"overflow\":\"auto\",\"padding-bottom\":\"53px\"},attrs:{\"title\":\"新增角色\",\"maskClosable\":false,\"width\":\"650\",\"placement\":\"right\",\"closable\":false,\"visible\":_vm.roleAddVisiable},on:{\"close\":_vm.onClose}},[_c('a-form',{attrs:{\"form\":_vm.form}},[_c('a-form-item',_vm._b({attrs:{\"label\":\"角色名称\",\"validateStatus\":_vm.validateStatus,\"help\":_vm.help}},'a-form-item',_vm.formItemLayout,false),[_c('a-input',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:(['roleName',\n                 {initialValue:'',\n                   rules: [\n                  { required: true, message: '不能为空'}\n                ]}]),expression:\"['roleName',\\n                 {initialValue:'',\\n                   rules: [\\n                  { required: true, message: '不能为空'}\\n                ]}]\"}],on:{\"blur\":_vm.handleRoleNameBlur}})],1),_vm._v(\" \"),_c('a-form-item',_vm._b({attrs:{\"label\":\"角色描述\"}},'a-form-item',_vm.formItemLayout,false),[_c('a-textarea',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:([\n        'remark',\n        {rules: [\n          { max: 50, message: '长度不能超过50个字符'}\n        ]}]),expression:\"[\\n        'remark',\\n        {rules: [\\n          { max: 50, message: '长度不能超过50个字符'}\\n        ]}]\"}],attrs:{\"rows\":4}})],1),_vm._v(\" \"),_c('a-form-item',_vm._b({staticStyle:{\"margin-bottom\":\"2rem\"},attrs:{\"label\":\"权限选择\",\"validateStatus\":_vm.menuSelectStatus,\"help\":_vm.menuSelectHelp}},'a-form-item',_vm.formItemLayout,false),[_c('a-tree',{key:_vm.menuTreeKey,ref:\"menuTree\",attrs:{\"checkable\":true,\"checkStrictly\":_vm.checkStrictly,\"expandedKeys\":_vm.expandedKeys,\"treeData\":_vm.menuTreeData},on:{\"check\":_vm.handleCheck,\"expand\":_vm.handleExpand}})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"drawer-bootom-button\"},[_c('a-dropdown',{staticStyle:{\"float\":\"left\"},attrs:{\"trigger\":['click'],\"placement\":\"topCenter\"}},[_c('a-menu',{attrs:{\"slot\":\"overlay\"},slot:\"overlay\"},[_c('a-menu-item',{key:\"1\",on:{\"click\":_vm.expandAll}},[_vm._v(\"展开所有\")]),_vm._v(\" \"),_c('a-menu-item',{key:\"2\",on:{\"click\":_vm.closeAll}},[_vm._v(\"合并所有\")]),_vm._v(\" \"),_c('a-menu-item',{key:\"3\",on:{\"click\":_vm.enableRelate}},[_vm._v(\"父子关联\")]),_vm._v(\" \"),_c('a-menu-item',{key:\"4\",on:{\"click\":_vm.disableRelate}},[_vm._v(\"取消关联\")])],1),_vm._v(\" \"),_c('a-button',[_vm._v(\"\\n        树操作\\n        \"),_c('a-icon',{attrs:{\"type\":\"up\"}})],1)],1),_vm._v(\" \"),_c('a-popconfirm',{attrs:{\"title\":\"确定放弃编辑？\",\"okText\":\"确定\",\"cancelText\":\"取消\"},on:{\"confirm\":_vm.onClose}},[_c('a-button',{staticStyle:{\"margin-right\":\".8rem\"}},[_vm._v(\"取消\")])],1),_vm._v(\" \"),_c('a-button',{attrs:{\"type\":\"primary\",\"loading\":_vm.loading},on:{\"click\":_vm.handleSubmit}},[_vm._v(\"提交\")])],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-c48af9f6\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/views/system/role/RoleAdd.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./RoleAdd.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./RoleAdd.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-c48af9f6\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./RoleAdd.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/system/role/RoleAdd.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}