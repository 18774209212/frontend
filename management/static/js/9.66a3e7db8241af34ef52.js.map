{"version":3,"sources":["webpack:///src/views/others/ImportResult.vue","webpack:///./src/views/others/ImportResult.vue?a54a","webpack:///./src/views/others/ImportResult.vue","webpack:///src/views/others/Excel.vue","webpack:///./src/views/others/Excel.vue?15af","webpack:///./src/views/others/Excel.vue"],"names":["ImportResult","props","importResultVisible","required","default","importData","errors","times","data","pagination","pageSizeOptions","defaultCurrent","defaultPageSize","showQuickJumper","showSizeChanger","showTotal","total","range","computed","errorsData","arr","i","this","length","error","e","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","get_iterator_default","errorFields","next","done","field","value","extends_default","row","push","err","return","successColumns","title","dataIndex","errorColumns","customRender","text","index","show","get","set","methods","handleCancel","$emit","others_ImportResult","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","centered","footer","maskClosable","width","on","cancel","model","callback","$$v","expression","message","type","_e","_v","slot","_s","defaultActiveKey","key","tab","ref","columns","dataSource","scroll","x","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__","Excel","components","fileList","uploading","paginationInfo","loading","mounted","fetch","handleClose","downloadTemplate","$download","exportExcel","$export","handleRemove","file","$message","warning","indexOf","newFileList","slice","splice","beforeUpload","concat","toConsumableArray_default","handleUpload","_this","formData","FormData","append","$upload","then","r","time","catch","console","handleTableChange","filters","sorter","_this2","params","arguments","$refs","TableInfo","current","pageSize","pageNum","$get","rows","others_Excel","staticStyle","remove","disabled","margin-right","click","bordered","change","close"],"mappings":"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","file":"static/js/9.66a3e7db8241af34ef52.js","sourcesContent":["<template>\n  <a-modal\n    class=\"import-result\"\n    title=\"导入结果\"\n    v-model=\"show\"\n    :centered=\"true\"\n    :footer=\"null\"\n    :maskClosable=\"false\"\n    :width=1000\n    @cancel=\"handleCancel\">\n    <div class=\"import-desc\">\n      <span v-if=\"importData.length === 0 && errors.length === 0\">\n        <a-alert\n          message=\"暂无导入记录\"\n          type=\"info\">\n        </a-alert>\n      </span>\n      <span v-if=\"importData.length !== 0 && errors.length !== 0\">\n        <a-alert\n          message=\"部分导入成功\"\n          type=\"warning\">\n          <div slot=\"description\">\n            成功导入 <a>{{importData.length}}</a> 条记录，<a>{{errors.length}}</a> 条记录导入失败，共耗时 <a>{{times}}</a> 秒\n          </div>\n        </a-alert>\n      </span>\n      <span v-if=\"importData.length !== 0 && errors.length === 0\">\n        <a-alert\n          message=\"全部导入成功\"\n          type=\"success\">\n          <div slot=\"description\">\n            成功导入 <a>{{importData.length}}</a> 条记录，共耗时 <a>{{times}}</a> 秒\n          </div>\n        </a-alert>\n      </span>\n      <span v-if=\"importData.length === 0 && errors.length !== 0\">\n        <a-alert\n          message=\"全部导入失败\"\n          type=\"error\">\n          <div slot=\"description\">\n            <a>{{errors.length}}</a> 条记录导入失败，共耗时  <a>{{times}}</a> 秒\n          </div>\n        </a-alert>\n      </span>\n    </div>\n    <a-tabs defaultActiveKey=\"1\">\n      <a-tab-pane tab=\"成功记录\" key=\"1\" v-if=\"importData.length\">\n        <a-table ref=\"successTable\"\n                 :columns=\"successColumns\"\n                 :dataSource=\"importData\"\n                 :pagination=\"pagination\"\n                 :scroll=\"{ x: 900 }\">\n        </a-table>\n      </a-tab-pane>\n      <a-tab-pane tab=\"失败记录\" key=\"2\" v-if=\"errors.length\">\n        <a-table ref=\"errorTable\"\n                 :columns=\"errorColumns\"\n                 :dataSource=\"errorsData\"\n                 :pagination=\"pagination\"\n                 :scroll=\"{ x: 900 }\">\n        </a-table>\n      </a-tab-pane>\n    </a-tabs>\n  </a-modal>\n</template>\n<script>\nexport default {\n  props: {\n    importResultVisible: {\n      required: true,\n      default: false\n    },\n    importData: {\n      required: true\n    },\n    errors: {\n      required: true\n    },\n    times: {\n      required: true\n    }\n  },\n  data () {\n    return {\n      pagination: {\n        pageSizeOptions: ['5', '10'],\n        defaultCurrent: 1,\n        defaultPageSize: 5,\n        showQuickJumper: true,\n        showSizeChanger: true,\n        showTotal: (total, range) => `显示 ${range[0]} ~ ${range[1]} 条记录，共 ${total} 条记录`\n      }\n    }\n  },\n  computed: {\n    errorsData () {\n      let arr = []\n      for (let i = 0; i < this.errors.length; i++) {\n        let error = this.errors[i]\n        let e = {}\n        for (let field of error.errorFields) {\n          e = {...field}\n          e.row = error.row\n          arr.push(e)\n        }\n      }\n      return arr\n    },\n    successColumns () {\n      return [{\n        title: '字段1',\n        dataIndex: 'field1'\n      }, {\n        title: '字段2',\n        dataIndex: 'field2'\n      }, {\n        title: '字段3',\n        dataIndex: 'field3'\n      }, {\n        title: '导入时间',\n        dataIndex: 'createTime'\n      }]\n    },\n    errorColumns () {\n      return [{\n        title: '行',\n        dataIndex: 'row',\n        customRender: (text, row, index) => {\n          return `第 ${text + 1} 行`\n        }\n      }, {\n        title: '列',\n        dataIndex: 'cellIndex',\n        customRender: (text, row, index) => {\n          return `第 ${text + 1} 列`\n        }\n      }, {\n        title: '列名',\n        dataIndex: 'column'\n      }, {\n        title: '错误信息',\n        dataIndex: 'errorMessage'\n      }]\n    },\n    show: {\n      get: function () {\n        return this.importResultVisible\n      },\n      set: function () {\n      }\n    }\n  },\n  methods: {\n    handleCancel () {\n      this.$emit('close')\n    }\n  }\n}\n</script>\n<style lang=\"less\">\n  .import-result {\n    .import-desc {\n      margin-bottom: .5rem;\n      a {\n        font-weight: 600;\n      }\n    }\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/others/ImportResult.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('a-modal',{staticClass:\"import-result\",attrs:{\"title\":\"导入结果\",\"centered\":true,\"footer\":null,\"maskClosable\":false,\"width\":1000},on:{\"cancel\":_vm.handleCancel},model:{value:(_vm.show),callback:function ($$v) {_vm.show=$$v},expression:\"show\"}},[_c('div',{staticClass:\"import-desc\"},[(_vm.importData.length === 0 && _vm.errors.length === 0)?_c('span',[_c('a-alert',{attrs:{\"message\":\"暂无导入记录\",\"type\":\"info\"}})],1):_vm._e(),_vm._v(\" \"),(_vm.importData.length !== 0 && _vm.errors.length !== 0)?_c('span',[_c('a-alert',{attrs:{\"message\":\"部分导入成功\",\"type\":\"warning\"}},[_c('div',{attrs:{\"slot\":\"description\"},slot:\"description\"},[_vm._v(\"\\n          成功导入 \"),_c('a',[_vm._v(_vm._s(_vm.importData.length))]),_vm._v(\" 条记录，\"),_c('a',[_vm._v(_vm._s(_vm.errors.length))]),_vm._v(\" 条记录导入失败，共耗时 \"),_c('a',[_vm._v(_vm._s(_vm.times))]),_vm._v(\" 秒\\n        \")])])],1):_vm._e(),_vm._v(\" \"),(_vm.importData.length !== 0 && _vm.errors.length === 0)?_c('span',[_c('a-alert',{attrs:{\"message\":\"全部导入成功\",\"type\":\"success\"}},[_c('div',{attrs:{\"slot\":\"description\"},slot:\"description\"},[_vm._v(\"\\n          成功导入 \"),_c('a',[_vm._v(_vm._s(_vm.importData.length))]),_vm._v(\" 条记录，共耗时 \"),_c('a',[_vm._v(_vm._s(_vm.times))]),_vm._v(\" 秒\\n        \")])])],1):_vm._e(),_vm._v(\" \"),(_vm.importData.length === 0 && _vm.errors.length !== 0)?_c('span',[_c('a-alert',{attrs:{\"message\":\"全部导入失败\",\"type\":\"error\"}},[_c('div',{attrs:{\"slot\":\"description\"},slot:\"description\"},[_c('a',[_vm._v(_vm._s(_vm.errors.length))]),_vm._v(\" 条记录导入失败，共耗时  \"),_c('a',[_vm._v(_vm._s(_vm.times))]),_vm._v(\" 秒\\n        \")])])],1):_vm._e()]),_vm._v(\" \"),_c('a-tabs',{attrs:{\"defaultActiveKey\":\"1\"}},[(_vm.importData.length)?_c('a-tab-pane',{key:\"1\",attrs:{\"tab\":\"成功记录\"}},[_c('a-table',{ref:\"successTable\",attrs:{\"columns\":_vm.successColumns,\"dataSource\":_vm.importData,\"pagination\":_vm.pagination,\"scroll\":{ x: 900 }}})],1):_vm._e(),_vm._v(\" \"),(_vm.errors.length)?_c('a-tab-pane',{key:\"2\",attrs:{\"tab\":\"失败记录\"}},[_c('a-table',{ref:\"errorTable\",attrs:{\"columns\":_vm.errorColumns,\"dataSource\":_vm.errorsData,\"pagination\":_vm.pagination,\"scroll\":{ x: 900 }}})],1):_vm._e()],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-74789958\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/views/others/ImportResult.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-74789958\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./ImportResult.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./ImportResult.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./ImportResult.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-74789958\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./ImportResult.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/others/ImportResult.vue\n// module id = null\n// module chunks = ","<template>\n  <div style=\"width: 100%\">\n    <div class=\"option-area\">\n       <a-upload\n         class=\"upload-area\"\n         :fileList=\"fileList\"\n         :remove=\"handleRemove\"\n         :disabled=\"fileList.length === 1\"\n         :beforeUpload=\"beforeUpload\">\n        <a-button>\n          <a-icon type=\"upload\" /> 选择.xlsx文件\n        </a-button>\n      </a-upload>\n      <div class=\"button-area\">\n        <a-button type=\"primary\" @click=\"downloadTemplate\" style=\"margin-right: .5rem\">\n          模板下载\n        </a-button>\n        <a-button @click=\"exportExcel\" style=\"margin-right: .5rem\">\n          导出Excel\n        </a-button>\n        <a-button\n          @click=\"handleUpload\"\n          :disabled=\"fileList.length === 0\"\n          :loading=\"uploading\">\n          {{uploading ? '导入中' : '导入Excel' }}\n        </a-button>\n      </div>\n    </div>\n    <a-card :bordered=\"false\" class=\"card-area\">\n      <!-- 表格区域 -->\n      <a-table ref=\"TableInfo\"\n               :columns=\"columns\"\n               :dataSource=\"dataSource\"\n               :pagination=\"pagination\"\n               :loading=\"loading\"\n               @change=\"handleTableChange\"\n               :scroll=\"{ x: 900 }\">\n      </a-table>\n    </a-card>\n    <import-result\n      @close=\"handleClose\"\n      :importData=\"importData\"\n      :errors=\"errors\"\n      :times=\"times\"\n      :importResultVisible=\"importResultVisible\">\n    </import-result>\n  </div>\n</template>\n<script>\nimport ImportResult from './ImportResult'\n\nexport default {\n  components: {ImportResult},\n  data () {\n    return {\n      fileList: [],\n      importData: [],\n      times: '',\n      errors: [],\n      uploading: false,\n      importResultVisible: false,\n      dataSource: [],\n      paginationInfo: null,\n      pagination: {\n        pageSizeOptions: ['10', '20', '30', '40', '100'],\n        defaultCurrent: 1,\n        defaultPageSize: 10,\n        showQuickJumper: true,\n        showSizeChanger: true,\n        showTotal: (total, range) => `显示 ${range[0]} ~ ${range[1]} 条记录，共 ${total} 条记录`\n      },\n      loading: false\n    }\n  },\n  computed: {\n    columns () {\n      return [{\n        title: '字段1',\n        dataIndex: 'field1'\n      }, {\n        title: '字段2',\n        dataIndex: 'field2'\n      }, {\n        title: '字段3',\n        dataIndex: 'field3'\n      }, {\n        title: '导入时间',\n        dataIndex: 'createTime'\n      }]\n    }\n  },\n  mounted () {\n    this.fetch()\n  },\n  methods: {\n    handleClose () {\n      this.importResultVisible = false\n    },\n    downloadTemplate () {\n      this.$download('test/template', {}, '导入模板.xlsx')\n    },\n    exportExcel () {\n      this.$export('test/export')\n    },\n    handleRemove (file) {\n      if (this.uploading) {\n        this.$message.warning('文件导入中，请勿删除')\n        return\n      }\n      const index = this.fileList.indexOf(file)\n      const newFileList = this.fileList.slice()\n      newFileList.splice(index, 1)\n      this.fileList = newFileList\n    },\n    beforeUpload (file) {\n      this.fileList = [...this.fileList, file]\n      return false\n    },\n    handleUpload () {\n      const { fileList } = this\n      const formData = new FormData()\n      formData.append('file', fileList[0])\n      this.uploading = true\n      this.$upload('test/import', formData).then((r) => {\n        let data = r.data.data\n        if (data.data.length) {\n          this.fetch()\n        }\n        this.importData = data.data\n        this.errors = data.error\n        this.times = data.time / 1000\n        this.uploading = false\n        this.fileList = []\n        this.importResultVisible = true\n      }).catch((r) => {\n        console.error(r)\n        this.uploading = false\n        this.fileList = []\n      })\n    },\n    handleTableChange (pagination, filters, sorter) {\n      this.paginationInfo = pagination\n      this.fetch()\n    },\n    fetch (params = {}) {\n      this.loading = true\n      if (this.paginationInfo) {\n        this.$refs.TableInfo.pagination.current = this.paginationInfo.current\n        this.$refs.TableInfo.pagination.pageSize = this.paginationInfo.pageSize\n        params.pageSize = this.paginationInfo.pageSize\n        params.pageNum = this.paginationInfo.current\n      } else {\n        params.pageSize = this.pagination.defaultPageSize\n        params.pageNum = this.pagination.defaultCurrent\n      }\n      this.$get('test', {\n        ...params\n      }).then((r) => {\n        let data = r.data\n        const pagination = { ...this.pagination }\n        pagination.total = data.total\n        this.loading = false\n        this.dataSource = data.rows\n        this.pagination = pagination\n      })\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n  @import \"../../../static/less/Common\";\n  .option-area {\n    display: inline-block;\n    width: 100%;\n    padding: 0 .9rem;\n    margin: .5rem 0;\n    .upload-area {\n      display: inline;\n      float: left;\n      width: 50%\n    }\n    .button-area {\n      margin-left: 1rem;\n      display: inline;\n      float: right;\n      width: 30%;\n    }\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/others/Excel.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticStyle:{\"width\":\"100%\"}},[_c('div',{staticClass:\"option-area\"},[_c('a-upload',{staticClass:\"upload-area\",attrs:{\"fileList\":_vm.fileList,\"remove\":_vm.handleRemove,\"disabled\":_vm.fileList.length === 1,\"beforeUpload\":_vm.beforeUpload}},[_c('a-button',[_c('a-icon',{attrs:{\"type\":\"upload\"}}),_vm._v(\" 选择.xlsx文件\\n      \")],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"button-area\"},[_c('a-button',{staticStyle:{\"margin-right\":\".5rem\"},attrs:{\"type\":\"primary\"},on:{\"click\":_vm.downloadTemplate}},[_vm._v(\"\\n        模板下载\\n      \")]),_vm._v(\" \"),_c('a-button',{staticStyle:{\"margin-right\":\".5rem\"},on:{\"click\":_vm.exportExcel}},[_vm._v(\"\\n        导出Excel\\n      \")]),_vm._v(\" \"),_c('a-button',{attrs:{\"disabled\":_vm.fileList.length === 0,\"loading\":_vm.uploading},on:{\"click\":_vm.handleUpload}},[_vm._v(\"\\n        \"+_vm._s(_vm.uploading ? '导入中' : '导入Excel')+\"\\n      \")])],1)],1),_vm._v(\" \"),_c('a-card',{staticClass:\"card-area\",attrs:{\"bordered\":false}},[_c('a-table',{ref:\"TableInfo\",attrs:{\"columns\":_vm.columns,\"dataSource\":_vm.dataSource,\"pagination\":_vm.pagination,\"loading\":_vm.loading,\"scroll\":{ x: 900 }},on:{\"change\":_vm.handleTableChange}})],1),_vm._v(\" \"),_c('import-result',{attrs:{\"importData\":_vm.importData,\"errors\":_vm.errors,\"times\":_vm.times,\"importResultVisible\":_vm.importResultVisible},on:{\"close\":_vm.handleClose}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-b0b93f24\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/views/others/Excel.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-b0b93f24\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./Excel.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./Excel.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./Excel.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-b0b93f24\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./Excel.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-b0b93f24\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/others/Excel.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}