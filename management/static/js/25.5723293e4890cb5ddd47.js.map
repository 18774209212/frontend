{"version":3,"sources":["webpack:///src/views/monitor/RedisInfo.vue","webpack:///./src/views/monitor/RedisInfo.vue?39ea","webpack:///./src/views/monitor/RedisInfo.vue"],"names":["RedisInfo","name","data","loading","memory","series","chartOptions","chart","animations","enabled","easing","dynamicAnimation","speed","toolbar","show","zoom","dataLabels","stroke","curve","title","text","align","markers","size","xaxis","yaxis","legend","xdata","key","colors","redisInfo","timer","beforeDestroy","this","clearInterval","mounted","_this","minMemory","minSize","maxMemory","maxSize","setInterval","$route","path","indexOf","_axios_0_18_1_axios_default","a","all","$get","then","r","currentMemory","used_memory","currentSize","dbSize","time","moment_default","format","push","length","shift","$refs","memoryInfo","updateSeries","slice","updateOptions","categories","min","max","keySize","catch","console","error","$message","monitor_RedisInfo","render","_vm","_h","$createElement","_c","_self","staticStyle","width","margin-top","attrs","gutter","span","ref","type","height","options","_v","orientation","border-bottom","_l","info","index","border-top","padding","_s","description","value","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/25.5723293e4890cb5ddd47.js","sourcesContent":["<template>\n  <div style=\"width: 100%;margin-top: 1rem\">\n    <a-row :gutter=\"8\">\n      <a-col :span=\"12\">\n        <apexchart ref=\"memoryInfo\" type=area height=350 :options=\"memory.chartOptions\" :series=\"memory.series\" />\n      </a-col>\n      <a-col :span=\"12\">\n        <apexchart ref=\"keySize\" type=area height=350  :options=\"key.chartOptions\" :series=\"key.series\" />\n      </a-col>\n    </a-row>\n    <a-row :gutter=\"8\">\n      <a-divider orientation=\"left\">Redis详细信息</a-divider>\n      <table style=\"border-bottom: 1px solid #f1f1f1;\">\n        <tr v-for=\"(info, index) in redisInfo\" :key=\"index\" style=\"border-top: 1px solid #f1f1f1;\">\n          <td style=\"padding: .7rem 1rem\">{{info.key}}</td>\n          <td style=\"padding: .7rem 1rem\">{{info.description}}</td>\n          <td style=\"padding: .7rem 1rem\">{{info.value}}</td>\n        </tr>\n      </table>\n    </a-row>\n  </div>\n</template>\n<script>\nimport axios from 'axios'\nimport moment from 'moment'\n\nexport default {\n  name: 'RedisInfo',\n  data () {\n    return {\n      loading: true,\n      memory: {\n        series: [],\n        chartOptions: {\n          chart: {\n            animations: {\n              enabled: true,\n              easing: 'linear',\n              dynamicAnimation: {\n                speed: 3000\n              }\n            },\n            toolbar: {\n              show: false\n            },\n            zoom: {\n              enabled: false\n            }\n          },\n          dataLabels: {\n            enabled: false\n          },\n          stroke: {\n            curve: 'smooth'\n          },\n          title: {\n            text: 'Redis内存实时占用情况（kb）',\n            align: 'left'\n          },\n          markers: {\n            size: 0\n          },\n          xaxis: {\n          },\n          yaxis: {},\n          legend: {\n            show: false\n          }\n        },\n        data: [],\n        xdata: []\n      },\n      key: {\n        series: [],\n        chartOptions: {\n          chart: {\n            animations: {\n              enabled: true,\n              easing: 'linear',\n              dynamicAnimation: {\n                speed: 3000\n              }\n            },\n            toolbar: {\n              show: false\n            },\n            zoom: {\n              enabled: false\n            }\n          },\n          dataLabels: {\n            enabled: false\n          },\n          colors: ['#f5564e'],\n          stroke: {\n            curve: 'smooth'\n          },\n          title: {\n            text: 'Redis key实时数量（个）',\n            align: 'left'\n          },\n          markers: {\n            size: 0\n          },\n          xaxis: {\n          },\n          yaxis: {},\n          legend: {\n            show: false\n          }\n        },\n        data: [],\n        xdata: []\n      },\n      redisInfo: [],\n      timer: null\n    }\n  },\n  beforeDestroy () {\n    if (this.timer) {\n      clearInterval(this.timer)\n    }\n  },\n  mounted () {\n    let minMemory = 1e10\n    let minSize = 1e10\n    let maxMemory = -1e10\n    let maxSize = -1e10\n    this.timer = setInterval(() => {\n      if (this.$route.path.indexOf('redis') !== -1) {\n        axios.all([\n          this.$get('admin/redis/keysSize'),\n          this.$get('admin/redis/memoryInfo')\n        ]).then((r) => {\n          let currentMemory = r[1].data.used_memory / 1000\n          let currentSize = r[0].data.dbSize\n          if (currentMemory < minMemory) {\n            minMemory = currentMemory\n          }\n          if (currentMemory > maxMemory) {\n            maxMemory = currentMemory\n          }\n          if (currentSize < minSize) {\n            minSize = currentSize\n          }\n          if (currentSize > maxSize) {\n            maxSize = currentSize\n          }\n          let time = moment().format('hh:mm:ss')\n          this.memory.data.push(currentMemory)\n          this.memory.xdata.push(time)\n          this.key.data.push(currentSize)\n          this.key.xdata.push(time)\n          if (this.memory.data.length >= 6) {\n            this.memory.data.shift()\n            this.memory.xdata.shift()\n          }\n          if (this.key.data.length >= 6) {\n            this.key.data.shift()\n            this.key.xdata.shift()\n          }\n          this.$refs.memoryInfo.updateSeries([\n            {\n              name: '内存(kb)',\n              data: this.memory.data.slice()\n            }\n          ])\n          this.$refs.memoryInfo.updateOptions({\n            xaxis: {\n              categories: this.memory.xdata.slice()\n            },\n            yaxis: {\n              min: minMemory,\n              max: maxMemory\n            }\n          }, true, true)\n          this.$refs.keySize.updateSeries([\n            {\n              name: 'key数量',\n              data: this.key.data.slice()\n            }\n          ])\n          this.$refs.keySize.updateOptions({\n            xaxis: {\n              categories: this.key.xdata.slice()\n            },\n            yaxis: {\n              min: minSize - 2,\n              max: maxSize + 2\n            }\n          }, true, true)\n          if (this.loading) {\n            this.loading = false\n          }\n        }).catch((r) => {\n          console.error(r)\n          this.$message.error('获取Redis信息失败')\n          if (this.timer) {\n            clearInterval(this.timer)\n          }\n        })\n      }\n    }, 3000)\n    this.$get('admin/redis/info').then((r) => {\n      this.redisInfo = r.data.data\n    })\n  }\n}\n</script>\n<style>\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/monitor/RedisInfo.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticStyle:{\"width\":\"100%\",\"margin-top\":\"1rem\"}},[_c('a-row',{attrs:{\"gutter\":8}},[_c('a-col',{attrs:{\"span\":12}},[_c('apexchart',{ref:\"memoryInfo\",attrs:{\"type\":\"area\",\"height\":\"350\",\"options\":_vm.memory.chartOptions,\"series\":_vm.memory.series}})],1),_vm._v(\" \"),_c('a-col',{attrs:{\"span\":12}},[_c('apexchart',{ref:\"keySize\",attrs:{\"type\":\"area\",\"height\":\"350\",\"options\":_vm.key.chartOptions,\"series\":_vm.key.series}})],1)],1),_vm._v(\" \"),_c('a-row',{attrs:{\"gutter\":8}},[_c('a-divider',{attrs:{\"orientation\":\"left\"}},[_vm._v(\"Redis详细信息\")]),_vm._v(\" \"),_c('table',{staticStyle:{\"border-bottom\":\"1px solid #f1f1f1\"}},_vm._l((_vm.redisInfo),function(info,index){return _c('tr',{key:index,staticStyle:{\"border-top\":\"1px solid #f1f1f1\"}},[_c('td',{staticStyle:{\"padding\":\".7rem 1rem\"}},[_vm._v(_vm._s(info.key))]),_vm._v(\" \"),_c('td',{staticStyle:{\"padding\":\".7rem 1rem\"}},[_vm._v(_vm._s(info.description))]),_vm._v(\" \"),_c('td',{staticStyle:{\"padding\":\".7rem 1rem\"}},[_vm._v(_vm._s(info.value))])])}))],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-792dabe7\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/views/monitor/RedisInfo.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-792dabe7\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./RedisInfo.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./RedisInfo.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./RedisInfo.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-792dabe7\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./RedisInfo.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/monitor/RedisInfo.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}